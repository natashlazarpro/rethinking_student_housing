{"version":3,"kind":"Notebook","sha256":"0dabbda600437745c12698ab6e77a4d7453454272f25c36e3c9b74809da4f83a","slug":"notebooks.central-place-analysis","location":"/notebooks/3.2_central_place_analysis.ipynb","dependencies":[],"frontmatter":{"title":"3.2 Central Place Analysis","content_includes_title":true,"kernelspec":{"name":"python3","display_name":"geodatascience2.0","language":"python"},"authors":[{"nameParsed":{"literal":"Lazareva Nataliia","given":"Lazareva","family":"Nataliia"},"name":"Lazareva Nataliia","id":"contributors-myst-generated-uid-0"},{"nameParsed":{"literal":"Urban Design M.Sc.","given":"Urban Design","family":"M.Sc."},"name":"Urban Design M.Sc.","id":"contributors-myst-generated-uid-1"},{"nameParsed":{"literal":"Technical University of Berlin","given":"Technical University","non_dropping_particle":"of","family":"Berlin"},"name":"Technical University of Berlin","id":"contributors-myst-generated-uid-2"}],"github":"https://github.com/natashlazarpro/rethinking_student_housing","copyright":"2025","numbering":{"title":{"offset":1}},"source_url":"https://github.com/natashlazarpro/rethinking_student_housing/blob/main/student-housing-book/notebooks/3.2_central_place_analysis.ipynb","edit_url":"https://github.com/natashlazarpro/rethinking_student_housing/edit/main/student-housing-book/notebooks/3.2_central_place_analysis.ipynb","exports":[{"format":"ipynb","filename":"3.2_central_place_analysis.ipynb","url":"/rethinking_student_housing/build/3.2_central_place_an-6f00ca0a6bbea022b6e42fc28cf63a6d.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import warnings\n\nwarnings.filterwarnings(\"ignore\")\n\nimport os\nhf = r'../outputs/3.2_central_place_analysis/'\nos.makedirs(hf, exist_ok=True)","visibility":"show","key":"qQXZpXWXtZ"},{"type":"outputs","id":"sD3KV3yl7Q5y-w0jB73qJ","children":[],"visibility":"show","key":"cbFpTcq9xs"}],"visibility":"remove","key":"O8VZyJdGql"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"3.2 Central Place Analysis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"S0SxieUTPQ"}],"identifier":"id-3-2-central-place-analysis","label":"3.2 Central Place Analysis","html_id":"id-3-2-central-place-analysis","implicit":true,"key":"afPXZ30I15"}],"key":"tZyYmz7MOP"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The chapter Student Housing Market: Capacities, Demand, and Spatial Distribution provides a consistent analysis of two systems: student accommodations and higher education universities.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"a1PCOvZRgW"}],"key":"jWsJSznYb4"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"To proceed to market analysis, it is necessary to examine how these two systems interact with each other, forming the student accommodation market. Central Place Theory, outlined in the chapter Theoretical Framework, assists in navigating the analysis process.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Es1Eiih8zS"}],"key":"A6dOV68Gvk"}],"key":"i5MalItrbi"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Set Up","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"G0tVlguQR0"}],"identifier":"set-up","label":"Set Up","html_id":"set-up","implicit":true,"key":"WIaoSpG6rv"}],"key":"I1OKQ23JQV"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Import Libraries","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uzBt30RSpM"}],"key":"QkwHJmLbD2"}],"key":"jDCvTNkHyi"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import os\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport matplotlib as mpl\nimport geopandas as gpd\nfrom shapely.geometry import Point, MultiPoint\nfrom pyproj import CRS\nfrom scipy.stats import norm\nfrom matplotlib.colors import LinearSegmentedColormap\nimport matplotlib.patheffects as path_effects\nimport string\nimport requests\nimport time\nfrom shapely.geometry import Polygon\nimport seaborn as sns\nfrom shapely.geometry import MultiPolygon","key":"cbp583RtYQ"},{"type":"outputs","id":"eHsbrKH3zq46AbKe0TjD5","children":[],"key":"Llgnwg4QDP"}],"key":"GceCvayOB4"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Colors","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IZkc1ODOEP"}],"key":"CAWWOtbUG8"}],"visibility":"remove","key":"CKl4novAyU"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"color_palettes = {\n    \"Mint\": [\"#EAF4E8\", \"#C8E0D4\", \"#A9CCC1\", \"#8FB9AE\", \"#76A79D\", \"#5F968E\", \"#498581\"], \n    \"Pi\": [\"#F8EDEB\", \"#FAE1DD\", \"#FCD5CE\", \"#FEC5BB\", \"#F8AD9D\", \"#F4978E\", \"#F08080\"],\n    \"Or\": [\"#FFE5D9\", \"#FFD7BA\", \"#FEC89A\", \"#FFB78F\", \"#F49F7D\", \"#F28B6D\", \"#E1755CFF\"],\n    \"GrSc\":  ['#EFEFEF', '#D9D9D9', '#CCCCCC', '#B7B7B7', '#999999', '#666666', '#434343'],\n    \"MintPi\": [\"#76A79D\", \"#8FB9AE\", \"#A9CCC1\", \"#C8E0D4\", \"#FBF0EA\", \"#FCD5CE\", \"#FEC5BB\", \"#F8AD9D\", \"#F4978E\"],\n    \"MintOr\": [\"#76A79D\", \"#8FB9AE\", \"#A9CCC1\", \"#C8E0D4\", \"#FBF0EA\", \"#FFD7BA\", \"#FEC89A\", \"#FFB78F\", \"#F28B6D\"],\n    \"MiPiOr\": ['#EAF4E8', '#FAE1DD', '#C8E0D4', '#FFD7BA', '#F8EDEB', '#FCD5CE', '#FFE5D9']\n}\n\ncmap_mint = LinearSegmentedColormap.from_list(\"Mint\", color_palettes[\"Mint\"])\ncmap_pi = LinearSegmentedColormap.from_list(\"Pi\", color_palettes[\"Pi\"])\ncmap_or = LinearSegmentedColormap.from_list(\"Or\", color_palettes[\"Or\"])\ncmap_mintpi = LinearSegmentedColormap.from_list(\"MintPi\", color_palettes[\"MintPi\"])\ncmap_mintor = LinearSegmentedColormap.from_list(\"MintOr\", color_palettes[\"MintOr\"])\ncmap_grsc = LinearSegmentedColormap.from_list(\"GrSc\", color_palettes[\"GrSc\"])\ncmap_mipior = LinearSegmentedColormap.from_list(\"MiPiOr\", color_palettes[\"MiPiOr\"])","visibility":"show","key":"lxpKHl9u9A"},{"type":"outputs","id":"8RkKJHcrnIjYZ-Co0Fb3H","children":[],"visibility":"show","key":"sUdLfykBgi"}],"visibility":"remove","key":"KU0HRoy8nW"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Font","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"p1FUY18uSZ"}],"key":"hYdXOxhBqI"}],"visibility":"remove","key":"lMiJtq46WT"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"plt.rcParams[\"font.family\"] = \"Helvetica\"","visibility":"show","key":"Ueav2hw3ie"},{"type":"outputs","id":"iDu6WtGUxtOzqdSC-S0Pd","children":[],"visibility":"show","key":"fGGvZBtbWV"}],"visibility":"remove","key":"bWLsaY3TxO"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Berlin Spatial Boundaries","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"NuqS1MnC6A"}],"key":"ByMVd9mRA2"}],"key":"iRMrsilAJD"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"pf = r\"../inputs/3.2_central_place_analysis/lor_pgr.gpkg\"\npgr = gpd.read_file(pf)\npgr.replace({'-': np.nan, 0: np.nan, '': np.nan}, inplace=True)\n\nbf = r\"../inputs/3.2_central_place_analysis/adm_bz.gpkg\"\nbz = gpd.read_file(bf)\nbz.replace({'-': np.nan, 0: np.nan, '': np.nan}, inplace=True)\n\nof = r\"../inputs/3.2_central_place_analysis/adm_out.gpkg\"\nout = gpd.read_file(of)\nout.replace({'-': np.nan, 0: np.nan, '': np.nan}, inplace=True)","key":"N0r3hlXliI"},{"type":"outputs","id":"e8_d6VLb3Rl6iNQtvCkaM","children":[],"key":"iYw4AxSUYR"}],"key":"TAYpVmdjbu"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The analysis of student accommodation capacity and higher education universities’ international student demand data, obtained as a result of Global Spatial Autocorrelation, served as the basis for student housing market research.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Nh1gy5l22E"}],"key":"QUaWzxNKYn"}],"key":"vljNw5sP35"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"ef = r'../inputs/3.2_central_place_analysis/pbsa_capacity_analysis.gpkg'\npbsa_cap = gpd.read_file(ef)\n\nmf = r'../inputs/3.2_central_place_analysis/uni_int_demand_analysis.gpkg'\nuni_dem = gpd.read_file(mf, driver=\"GPKG\")","key":"yt69B6nE5K"},{"type":"outputs","id":"i7omfKTzp-yc7B4CQqClE","children":[],"key":"LNNQLdkh7l"}],"key":"JaHk8ZwTQ3"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Central Places Definition","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Hcv1horjtS"}],"identifier":"central-places-definition","label":"Central Places Definition","html_id":"central-places-definition","implicit":true,"key":"Zf8ObglJhv"}],"key":"AcB5EgWyVV"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"In Central Place Theory King (1986) argue that the idea that there is a smooth and regular progression in urban centres from the smallest up to the largest center - is not a very useful one, and that greater insight can be gained into the nature of an urban pattern by referring to discrete population-size classes.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XVkY4rz6Rc"}],"key":"n1EjIf7vgX"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Taking this into account, central universities should be defined not as the ‘largest’ in terms of numbers, but as institutions that perform central functions in the urban system. Their significance is determined not so much by the scale of student enrolment as by their functional role, their position in the urban and educational hierarchy, and their ability to serve wider areas of attraction.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"hu2wRGIXJk"}],"key":"RY59qL6f43"}],"key":"SZUiAIm7Ef"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Cleaning Higher Education Universities Data Set","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"AipSqQ5i2I"}],"key":"asCndEH2jt"}],"visibility":"remove","key":"PlBaz2GofU"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"uni_dem = uni_dem.dropna(subset=['!s_aus'])\n\nuni_dem = uni_dem.drop(columns=['!s_aus_std', '!s_aus_slag', '!s_aus_slag_std'])","visibility":"show","key":"ZcULmtJCir"},{"type":"outputs","id":"nk3IU3__Yk1C8_rQPBhuK","children":[],"visibility":"show","key":"dPqB8HDY4H"}],"visibility":"remove","key":"xItM2lASFU"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"In order to determine which universities are considered central, the following concerns must be taken into account.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"nloOhusB9a"}],"key":"nW70ipjQnl"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Firstly, based on spatial economics analysis of university clusters, only High–High (HH), Low–High (LH) and High–Low (HL) clusters are capable of generating sustained high demand in the housing market, fulfilling the functional roles of centres. Meanwhile, Low–Low (LL) clusters do not form centres of demand.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"xonLQf4Nku"}],"key":"gIDbqG3SYA"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Secondly, the number of central universities must be limited, as 26 out of 52 universities cannot be central by definition.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"HpjMWSAp0P"}],"key":"IbzvHkI1U5"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Only by taking this into account can a quantitative test be conducted using the international student demand (","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"mftG2QvGds"},{"type":"inlineCode","value":"!s_aus","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"ChvDioHam0"},{"type":"text","value":") threshold.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"jkuGaSPiaW"}],"key":"QcqmlUQE69"}],"key":"YEB4C5xdyf"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Option 1: Based on percentiles (recommended for your data)\nthreshold_percentile = np.percentile(np.abs(uni_dem['!s_aus']), 75)  \n# 75th percentile of absolute values\nprint(f\"Option 1 - Percentile-based threshold: {threshold_percentile:.3f}\")\nprint(f\"  (75th percentile of absolute values)\")\n\n# Option 2: Based on standard deviation\nstd_dev = uni_dem['!s_aus'].std()\nthreshold_std = 0.5 * std_dev  # 0.5 standard deviations\nprint(f\"Option 2 - Standard deviation-based threshold: {threshold_std:.3f}\") #Standard deviation für alle features \nprint(f\"  (0.5 * standard deviation)\")\n\n# Option 3: Fixed threshold based on your data range\nthreshold_fixed = 550.0  # Fixed value appropriate for your range\nprint(f\"Option 3 - Fixed threshold: {threshold_fixed:.3f}\")\nprint(f\"  (Fixed value for your data range)\")\n\n# Option 4: Median-based threshold\nmedian_abs = np.median(np.abs(uni_dem['!s_aus']))\nthreshold_median = median_abs * 0.5\nprint(f\"Option 4 - Median-based threshold: {threshold_median:.3f}\")\nprint(f\" (0.5 * median of absolute values)\")\n\nthresholds_to_test = [threshold_percentile, threshold_std, threshold_fixed, threshold_median]\n\nfor i, test_threshold in enumerate(thresholds_to_test, 1):\n    print(f\"\\nTest {i}: threshold = {test_threshold:.3f}\")\n    \n    test_centr = uni_dem[\n        (uni_dem['cluster'].isin(['HL', 'HH', 'LH', 'LL',])) & \n        (uni_dem['!s_aus'] >= test_threshold)\n        ]\n\n    print(f\"Total features: {len(test_centr)}\")\n    print(f\"Total demand: {test_centr['!s_aus'].sum()}\")\n\n    print(f\"Features with cluster = 'NS': {len(test_centr[test_centr['cluster'] == 'NS'])}\")\n    print(f\"Features with cluster = 'HH': {len(test_centr[test_centr['cluster'] == 'HH'])}\")\n    print(f\"Features with cluster = 'LH': {len(test_centr[test_centr['cluster'] == 'LH'])}\")\n    print(f\"Features with cluster = 'HL': {len(test_centr[test_centr['cluster'] == 'HL'])}\")\n    print(f\"Features with cluster = 'LL': {len(test_centr[test_centr['cluster'] == 'LL'])}\")\n","visibility":"remove","key":"mib1grDDbB"},{"type":"outputs","id":"_0J93_U5lnpq5Lqpg-SsC","children":[{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"Option 1 - Percentile-based threshold: 414.000\n  (75th percentile of absolute values)\nOption 2 - Standard deviation-based threshold: 828.251\n  (0.5 * standard deviation)\nOption 3 - Fixed threshold: 550.000\n  (Fixed value for your data range)\nOption 4 - Median-based threshold: 51.000\n (0.5 * median of absolute values)\n\nTest 1: threshold = 414.000\nTotal features: 15\nTotal demand: 40958.7\nFeatures with cluster = 'NS': 0\nFeatures with cluster = 'HH': 3\nFeatures with cluster = 'LH': 9\nFeatures with cluster = 'HL': 3\nFeatures with cluster = 'LL': 0\n\nTest 2: threshold = 828.251\nTotal features: 12\nTotal demand: 39607.76\nFeatures with cluster = 'NS': 0\nFeatures with cluster = 'HH': 3\nFeatures with cluster = 'LH': 9\nFeatures with cluster = 'HL': 0\nFeatures with cluster = 'LL': 0\n\nTest 3: threshold = 550.000\nTotal features: 12\nTotal demand: 39607.76\nFeatures with cluster = 'NS': 0\nFeatures with cluster = 'HH': 3\nFeatures with cluster = 'LH': 9\nFeatures with cluster = 'HL': 0\nFeatures with cluster = 'LL': 0\n\nTest 4: threshold = 51.000\nTotal features: 45\nTotal demand: 46240.259999999995\nFeatures with cluster = 'NS': 0\nFeatures with cluster = 'HH': 3\nFeatures with cluster = 'LH': 9\nFeatures with cluster = 'HL': 19\nFeatures with cluster = 'LL': 14\n"},"children":[],"key":"wlCakz19gb"}],"visibility":"show","key":"krXlBJ0Den"}],"visibility":"show","key":"Qo2WP4tpV4"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"In order to correctly interpret the Threshold Test, it is necessary to pay attention to the number of universities and their distribution across four spatial clusters.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hlTGDwpNH0"}],"key":"QXzvG4NXAt"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Option 1 - Percentile-based threshold: 414,000","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"EfOhEqkCrf"}],"key":"jjPsFciXpW"},{"type":"break","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"QMQsZBdD73"},{"type":"text","value":"With a percentile-based threshold, the upper quarter of the distribution is selected, taking into account three spatial clusters - HH, LH and HL. It also significantly reduces the sample from 52 to 15 universities, fixing the central nodes of the pair. Therefore, this threshold creates a threshold that reflects the real structure of the student housing market. (","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"fPxOBxHZn1"},{"type":"inlineCode","value":"theshold = threshold_percentile","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"GTmg6uw4dd"},{"type":"text","value":").","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"wIoA1CRbJF"}],"key":"XFLhY5CrUg"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Option 2 - Standard deviation-based threshold: 828.251","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"Bj6EMRo10t"}],"key":"dB0xAXc1Ot"},{"type":"break","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"PpYX3OTscX"},{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Option 3 - Fixed threshold: 550.000","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"Jhgnrg7Nfu"}],"key":"QmPZ7OU4OU"},{"type":"break","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"I0T7gtEQDu"},{"type":"text","value":"Standard deviation-based and fixed thresholds exclude HL clusters that are early indicators of the development of new student attraction zones.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"aKNSoBnZeB"}],"key":"rGqefzUJlI"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"strong","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Option 4 - Median-based threshold: 51.000","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"sPiWkCtKxf"}],"key":"FjlxJboIee"},{"type":"break","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"vTsjyZzyM9"},{"type":"text","value":"With a median-based threshold, almost all universities become ‘central,’ which devalues the category itself.","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"sfhlznP4p5"}],"key":"o04iL9UcL7"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Thus, using the spatial clusters and percentile-based threshold filter, 15 universities (Table XX) were identified as central.","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"FT5Mky1S1g"}],"key":"RZOoMjWeBV"}],"key":"CHybaOPNam"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Таким образом, с помошью фильтра по spatial clusters and percentile-based threshold было получено 15 университетов (Table XX), которые являються центральными.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"D17MBGmQgy"}],"key":"vyzkmhgBN7"}],"key":"igK8UIW9Ws"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"central_places = uni_dem[\n    (uni_dem['cluster_aus'].isin(['HL', 'HH', 'LH'])) & \n    (uni_dem['!s_aus'] >= threshold_percentile)\n]","key":"RYkH9IlnJr"},{"type":"outputs","id":"hdJMI5vljA15yXxR1UHmz","children":[],"key":"zFag2FwN1N"}],"key":"VfGTmMjQUA"},{"type":"block","kind":"notebook-code","data":{"tags":["revome-input"]},"children":[{"type":"code","lang":"python","executable":true,"value":"central_places[[\n    \"code\",\n    \"abr\",\n    \"name\",\n    \"own\",\n    \"cluster\",\n    \"!s_aus\"\n]]","visibility":"show","key":"IDNa1ITesc"},{"type":"outputs","id":"ZIox-N0JaI6m3-FQ7reob","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":10,"metadata":{},"data":{"application/vnd.microsoft.datawrangler.viewer.v0+json":{"content":"{\"columns\":[{\"name\":\"index\",\"rawType\":\"int64\",\"type\":\"integer\"},{\"name\":\"code\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"abr\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"name\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"own\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"cluster\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"!s_aus\",\"rawType\":\"float64\",\"type\":\"float\"}],\"ref\":\"b68e254d-9df3-4f3c-9ba3-6590b6a024ce\",\"rows\":[[\"2\",\"HS0180\",\"CU \",\"Charite - Universitätsmedizin Berlin\",\"Public University\",\"LH\",\"1266.5\"],[\"3\",\"HS0180\",\"CU \",\"Charite - Universitätsmedizin Berlin\",\"Public University\",\"HL\",\"455.93999999999994\"],[\"6\",\"HS0200\",\"HU \",\"Humboldt-Universität Berlin\",\"Public University\",\"LH\",\"3608.4599999999996\"],[\"7\",\"HS0200\",\"HU \",\"Humboldt-Universität Berlin\",\"Public University\",\"LH\",\"2806.5799999999995\"],[\"16\",\"HS1380\",\"FU \",\"Freie Universität Berlin\",\"Public University\",\"LH\",\"8280.02\"],[\"21\",\"HS1690\",\"TU \",\"Technische Universität Berlin\",\"Public University\",\"LH\",\"9914.010000000002\"],[\"23\",\"HS1700\",\"ESCP\",\"ESCP-Europe Wirtschaftshochschule Berlin \",\"Privat University\",\"HH\",\"1092.0\"],[\"30\",\"HS2290\",\"BIU \",\"Berlin Int. Univ. of Applied Sciences \",\"Privat University\",\"HL\",\"417.0\"],[\"36\",\"HS2790\",\"UAB \",\"Universität der Künste Berlin\",\"Public University\",\"HH\",\"1243.3399999999997\"],[\"39\",\"HS3270\",\"GIU \",\"German International University Berlin \",\"Privat University\",\"HL\",\"478.0\"],[\"45\",\"HS5802\",\"UEAS \",\"U of Europe for Appl.Sc.Potsdam i.Berlin \",\"Privat University\",\"LH\",\"2501.0\"],[\"52\",\"HS7690\",\"HTW\",\"Hochschule für Technik und Wirtschaft Berlin \",\"Public University\",\"LH\",\"3908.01\"],[\"55\",\"HS7710\",\"BTS \",\"Berliner Hochschule für Technik \",\"Public University\",\"LH\",\"2171.959999999999\"],[\"56\",\"HS7721\",\"HWR_BA \",\"HWR Berlin, FB Wirtschaft \",\"Public University\",\"HH\",\"1335.88\"],[\"69\",\"HS7971\",\"SRHU \",\"SRH Berlin U of Appl. Sciences in Berlin \",\"Privat University\",\"LH\",\"1480.0\"]],\"shape\":{\"columns\":6,\"rows\":15}}","content_type":"application/vnd.microsoft.datawrangler.viewer.v0+json"},"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>code</th>\n      <th>abr</th>\n      <th>name</th>\n      <th>own</th>\n      <th>cluster</th>\n      <th>!s_aus</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>2</th>\n      <td>HS0180</td>\n      <td>CU</td>\n      <td>Charite - Universitätsmedizin Berlin</td>\n      <td>Public University</td>\n      <td>LH</td>\n      <td>1266.50</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>HS0180</td>\n      <td>CU</td>\n      <td>Charite - Universitätsmedizin Berlin</td>\n      <td>Public University</td>\n      <td>HL</td>\n      <td>455.94</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>HS0200</td>\n      <td>HU</td>\n      <td>Humboldt-Universität Berlin</td>\n      <td>Public University</td>\n      <td>LH</td>\n      <td>3608.46</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>HS0200</td>\n      <td>HU</td>\n      <td>Humboldt-Universität Berlin</td>\n      <td>Public University</td>\n      <td>LH</td>\n      <td>2806.58</td>\n    </tr>\n    <tr>\n      <th>16</th>\n      <td>HS1380</td>\n      <td>FU</td>\n      <td>Freie Universität Berlin</td>\n      <td>Public University</td>\n      <td>LH</td>\n      <td>8280.02</td>\n    </tr>\n    <tr>\n      <th>21</th>\n      <td>HS1690</td>\n      <td>TU</td>\n      <td>Technische Universität Berlin</td>\n      <td>Public University</td>\n      <td>LH</td>\n      <td>9914.01</td>\n    </tr>\n    <tr>\n      <th>23</th>\n      <td>HS1700</td>\n      <td>ESCP</td>\n      <td>ESCP-Europe Wirtschaftshochschule Berlin</td>\n      <td>Privat University</td>\n      <td>HH</td>\n      <td>1092.00</td>\n    </tr>\n    <tr>\n      <th>30</th>\n      <td>HS2290</td>\n      <td>BIU</td>\n      <td>Berlin Int. Univ. of Applied Sciences</td>\n      <td>Privat University</td>\n      <td>HL</td>\n      <td>417.00</td>\n    </tr>\n    <tr>\n      <th>36</th>\n      <td>HS2790</td>\n      <td>UAB</td>\n      <td>Universität der Künste Berlin</td>\n      <td>Public University</td>\n      <td>HH</td>\n      <td>1243.34</td>\n    </tr>\n    <tr>\n      <th>39</th>\n      <td>HS3270</td>\n      <td>GIU</td>\n      <td>German International University Berlin</td>\n      <td>Privat University</td>\n      <td>HL</td>\n      <td>478.00</td>\n    </tr>\n    <tr>\n      <th>45</th>\n      <td>HS5802</td>\n      <td>UEAS</td>\n      <td>U of Europe for Appl.Sc.Potsdam i.Berlin</td>\n      <td>Privat University</td>\n      <td>LH</td>\n      <td>2501.00</td>\n    </tr>\n    <tr>\n      <th>52</th>\n      <td>HS7690</td>\n      <td>HTW</td>\n      <td>Hochschule für Technik und Wirtschaft Berlin</td>\n      <td>Public University</td>\n      <td>LH</td>\n      <td>3908.01</td>\n    </tr>\n    <tr>\n      <th>55</th>\n      <td>HS7710</td>\n      <td>BTS</td>\n      <td>Berliner Hochschule für Technik</td>\n      <td>Public University</td>\n      <td>LH</td>\n      <td>2171.96</td>\n    </tr>\n    <tr>\n      <th>56</th>\n      <td>HS7721</td>\n      <td>HWR_BA</td>\n      <td>HWR Berlin, FB Wirtschaft</td>\n      <td>Public University</td>\n      <td>HH</td>\n      <td>1335.88</td>\n    </tr>\n    <tr>\n      <th>69</th>\n      <td>HS7971</td>\n      <td>SRHU</td>\n      <td>SRH Berlin U of Appl. Sciences in Berlin</td>\n      <td>Privat University</td>\n      <td>LH</td>\n      <td>1480.00</td>\n    </tr>\n  </tbody>\n</table>\n</div>","content_type":"text/html"},"text/plain":{"content":"      code      abr                                           name  \\\n2   HS0180      CU            Charite - Universitätsmedizin Berlin   \n3   HS0180      CU            Charite - Universitätsmedizin Berlin   \n6   HS0200      HU                     Humboldt-Universität Berlin   \n7   HS0200      HU                     Humboldt-Universität Berlin   \n16  HS1380      FU                        Freie Universität Berlin   \n21  HS1690      TU                   Technische Universität Berlin   \n23  HS1700     ESCP      ESCP-Europe Wirtschaftshochschule Berlin    \n30  HS2290     BIU          Berlin Int. Univ. of Applied Sciences    \n36  HS2790     UAB                   Universität der Künste Berlin   \n39  HS3270     GIU         German International University Berlin    \n45  HS5802    UEAS       U of Europe for Appl.Sc.Potsdam i.Berlin    \n52  HS7690      HTW  Hochschule für Technik und Wirtschaft Berlin    \n55  HS7710     BTS                Berliner Hochschule für Technik    \n56  HS7721  HWR_BA                      HWR Berlin, FB Wirtschaft    \n69  HS7971    SRHU       SRH Berlin U of Appl. Sciences in Berlin    \n\n                  own cluster   !s_aus  \n2   Public University      LH  1266.50  \n3   Public University      HL   455.94  \n6   Public University      LH  3608.46  \n7   Public University      LH  2806.58  \n16  Public University      LH  8280.02  \n21  Public University      LH  9914.01  \n23  Privat University      HH  1092.00  \n30  Privat University      HL   417.00  \n36  Public University      HH  1243.34  \n39  Privat University      HL   478.00  \n45  Privat University      LH  2501.00  \n52  Public University      LH  3908.01  \n55  Public University      LH  2171.96  \n56  Public University      HH  1335.88  \n69  Privat University      LH  1480.00  ","content_type":"text/plain"}}},"children":[],"key":"BEBwH8VoRQ"}],"visibility":"show","key":"TxucmQEw6S"}],"visibility":"show","key":"PEAZ7xgroQ"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Table XX. Central Higher Education Universities","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cvI4WymKPC"}],"key":"ljZL9jKen8"}],"key":"dKVdFxSgvN"}],"key":"K390BFOTZG"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Market Areas Definition","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SK1yUFDxUi"}],"identifier":"market-areas-definition","label":"Market Areas Definition","html_id":"market-areas-definition","implicit":true,"key":"AS9sYxC8yB"}],"key":"zbLtNmmhTL"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Once the central universities have been identified, the next step is to define market areas that jointly reflect data on higher education universities’ international demand and student accommodation capacity. As noted in the Overview chapter, there are several approaches to combining these data. Here are three primary approaches.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"reL9TEUk80"}],"key":"LAhK8nwFwJ"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The first approach is to use Berlin’s existing administrative boundaries, such as Life-Oriented Spaces (LOR - Lebensweltlich Orientierte Räume) or their sub-level Neighbourhood Districts (BZR - Bezirksregionen). However, this method creates significant gaps: many areas end up “empty” because they have neither universities nor student accommodation. This indicates that neighbourhood districts are too small for analysing the urban supply and demand system. The next level, Prognosis Areas (PGR), on the contrary, is too large and aggregates too heterogeneous areas. Thus, the existing life-oriented spaces do not reflect the real geography of the student housing market.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"RlA20N4nKT"}],"key":"xhA2kQioCh"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"The second approach is to build buffer zones around central universities, creating new geometries for spatial data integration. However, due to Berlin’s heterogeneous morphology, it is impossible to correctly determine a universal buffer distance. In addition, this method results in all market areas being the same size, which contradicts the actual structure of urban accessibility and central place theory.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"l70DYSWd0p"}],"key":"waXV9LEHuf"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"The third approach is to use accessibility isochrones, i.e., zones formed on the basis of actual travel time. Unlike administrative boundaries or fixed buffers, isochrones reflect the actual spatial relationship  and student mobility. This allows for the creation of flexible and functionally relevant market areas in which supply and demand can be matched more accurately.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"uuxih8klAD"}],"key":"aYpWzIYNNs"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"To construct accessibility isochrones, the study used the Travel Time API service, which allows modelling reachability zones based on real-time travel. A distinctive feature of the Travel Time service is the ability to generate isochrones based on public transport estimates (","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"YDh6GIkULu"},{"type":"inlineCode","value":"‘type’: ‘public_transport’","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"XcGh4MpRVW"},{"type":"text","value":").","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"O5PF8ZxxBO"}],"key":"wtIExdQsAq"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Below is an example of using the Travel Time API to create 15-minute accessibility zones (","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"al2fXVKK1o"},{"type":"inlineCode","value":"travel_time = 900","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"E6bj1w7CwO"},{"type":"text","value":").","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"LLDfgNGgdG"}],"key":"dL86ZEwh2V"}],"key":"PvilC3x5CW"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# url = 'https://api.traveltimeapp.com/v4/time-map'\n\n# tt_app_id = 'my_app_id'\n# tt_api_key = 'my_api_key'\n\n# headers = {\n#     'content-type': 'application/json',\n#     'x-application-id': tt_app_id,\n#     'x-api-key': tt_api_key\n# }\n\n# travel_time = 900 # 15 minutes\n\n# for idx, row in central_places.iterrows():\n#     lon = float(row['lon'])\n#     lat = float(row['lat'])\n\n#     payload = {\n#         \"arrival_searches\": [\n#             {\n#                 \"id\": f\"iso_{idx}\",\n#                 \"coords\": {\"lat\": lat, \"lng\": lon},\n#                 \"arrival_time\": \"2025-08-13T09:00:00+01:00\",\n#                 \"travel_time\": travel_time,\n#                 \"transportation\": {\"type\": \"public_transport\", \"disable_border_crossing\": True } \n#             }\n#         ]\n#     }\n\n#     resp = requests.post(url, json=payload, headers=headers)\n#     print(f\"request {idx}: {resp.status_code} {resp.reason} for location {[lon, lat]}\")\n\n#     if resp.ok:\n#         data = resp.json()\n#         for res in data.get('results', []):\n#             search_id = res.get('search_id')\n#             for shp in res.get('shapes', []):\n#                 shell = shp.get('shell', [])\n#                 if not shell:\n#                     continue\n#                 coords = [(pt['lng'], pt['lat']) for pt in shell]\n#                 if coords and coords[0] != coords[-1]:\n#                     coords.append(coords[0])\n#                 poly = Polygon(coords)\n#                 g = gpd.GeoDataFrame([{'geometry': poly, 'tt_id': search_id, \n#                                       'origin_lon': lon, 'origin_lat': lat}],\n#                                       crs='EPSG:4326')\n#                 iso_gdf = gpd.GeoDataFrame(pd.concat([iso_gdf, g], \n#                                                       ignore_index=True, \n#                                                       sort=False))\n\n#         time.sleep(15)\n\n# print(f\"got {len(iso_gdf)} isochrone polygons.\")","key":"KivoEyTMP8"},{"type":"outputs","id":"WjTKHwr107s6Zm_gB2_e-","children":[],"key":"QxYbaIPaaE"}],"key":"WkkVTchqpn"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# iso_gdf[\"geometry\"] = iso_gdf[\"geometry\"].buffer(0)\n# iso_gdf.to_crs(epsg=25833)\n\n# ef = r\"../outputs/3.2_central_place_analysis/iso_without_data_15_min.gpkg\"\n# iso_gdf.to_file(ef, driver=\"GPKG\")","key":"wkLtR4vqVT"},{"type":"outputs","id":"l_w2TgSGx0tlg5ZL1AWha","children":[],"key":"ap1GD5Oj0k"}],"key":"lNZT2LgECo"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Travel Time Test","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"QQR97fBIVc"}],"identifier":"travel-time-test","label":"Travel Time Test","html_id":"travel-time-test","implicit":true,"key":"Bk2XEqDtXc"}],"key":"BRxQjTlYDd"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Since isochrones are sensitive to travel time, a travel time test was conducted (Figure XX) to determine market areas where travel time varied from 10 to 35 minutes with 5-minute intervals (","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"clugYv9QsX"},{"type":"inlineCode","value":"isochrone_times = [10, 15, 20, 25, 30, 35]","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hqIWa9RagJ"},{"type":"text","value":").","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xo7SpsH6Bm"}],"key":"vwSOIPOneh"}],"key":"lA4kVL41AG"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Define isochrone time ranges\nisochrone_times = [10, 15, 20, 25, 30, 35]\nbase_path = \"../outputs/3.2_central_place_analysis\"\n\n# Initialize results storage\nresults_summary = []\npbsa_market_summary = None\niso_dem_ready = None \npbsa_cap_ready = None\nsummary_df = None","key":"Gw17O3F8A8"},{"type":"outputs","id":"gmRMKAFrpuYqJkdUS_-Bi","children":[],"key":"IRL8VkGqoO"}],"key":"iEXwuqOHkH"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"total_capacity_complete = pbsa_cap[\"!cap\"].sum()\ntotal_demand_complete = uni_dem[\"!s_aus\"].sum()\n\npbsa_cap = pbsa_cap.to_crs(\"EPSG:25833\")\ncentral_places = central_places.to_crs(\"EPSG:25833\")","key":"NUYXcuVtmS"},{"type":"outputs","id":"ZS7TYw0pqmtVySSkSw-SU","children":[],"key":"kIrywwtcFb"}],"key":"YGRxzRKKc5"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"n_rows, n_cols = 3, 2   \nfig, axs = plt.subplots(\n    nrows=n_rows,\n    ncols=n_cols,\n    figsize=(9 * n_cols, 6 * n_rows)\n)\n\nfor idx, time_min in enumerate(isochrone_times):\n    r, c = divmod(idx, n_cols)         \n    ax = axs[r, c]\n\n    file_path = os.path.join(base_path, f\"iso_without_data_{time_min}_min.gpkg\")\n    market = gpd.read_file(file_path).to_crs(\"EPSG:25833\")\n\n\n    pgr.plot(ax=ax,facecolor='none',edgecolor='#cccccc',linewidth=0.5,linestyle='--')\n    bz.plot(ax=ax,facecolor='none',edgecolor='#999999',linewidth=0.75)\n    out.plot(ax=ax,facecolor='none',edgecolor='#666666',linewidth=1)\n\n    market.plot(\n        ax=ax,\n        color=\"#FEC5BB\",          #.reversed()   # <-- choose any matplotlib colormap\n        alpha=0.35,\n        edgecolor='white',\n        linewidth=1,\n        legend=True,\n        legend_kwds={'shrink': 0.6, 'label': \"demand‑capacity pressure\"}\n    )\n\n    letter = string.ascii_lowercase[idx]  # 'a', 'b', 'c', …\n    ax.set_title(f\"{letter}. Travel Time – {time_min} minutes\", fontsize=12, pad=8, fontweight='bold')\n    ax.set_axis_off()\n    plt.tight_layout()\n\nsave_path = os.path.join(hf, \"Travel Time Test.png\")\nplt.savefig(save_path, dpi=300, bbox_inches=\"tight\")\n\nplt.show()","visibility":"remove","key":"GgDxercwg5"},{"type":"outputs","id":"Y-NKDp2wJ-u5zjBAgy8Lm","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"45949f69f37e9f5a26be3666e3add5b8","path":"/rethinking_student_housing/build/45949f69f37e9f5a26be3666e3add5b8.png"},"text/plain":{"content":"<Figure size 1800x1800 with 6 Axes>","content_type":"text/plain"}}},"children":[],"key":"rkKpI0TmN3"}],"visibility":"show","key":"vNEiM81OpC"}],"visibility":"show","key":"ZJ94FNapM6"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Figure XX. Travel-Time API Test","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Sx5K1RYOm5"}],"key":"hTI6rnAJof"}],"key":"hcF904KNeN"}],"key":"AFOgmL90yM"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"When constructing isochrones, it is important to correctly interpret the allocation of student housing capacity and higher education universities demand.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YrHwSAhRdH"}],"key":"PJrBMEi2U0"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The allocation of student accommodations is performed using a spatial join between points and isochrone polygons. Since one student accommodations facility may be located within the catchment area of several universities, directly assigning its full capacity to each area would lead to a significant overestimation of supply. To avoid double-counting, each student accommodation facility first receives information about the number of isochrones in which it is located, after which its capacity is divided equally among all relevant areas. The adjusted values are then aggregated at the market area level. This approach allows for the correct distribution of available housing in accordance with the actual spatial structure of accessibility, taking into account the overlap of the areas of influence of different universities.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"OCvwBltGcW"}],"key":"bJdDvRpd3h"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Similar to the distribution of dormitories, university demand (number of German students (","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"hhnzSOWg73"},{"type":"inlineCode","value":"!s_de","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"RE5FvxoTLB"},{"type":"text","value":"), number of foreign students (","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"QRmTXWtS5D"},{"type":"inlineCode","value":"!s_aus","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"FfClJ5gc21"},{"type":"text","value":") and total number of students (","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"bH1dquo7dT"},{"type":"inlineCode","value":"!s_all","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"wOvyg1l3Ko"},{"type":"text","value":")) is assigned to isochrones based on the principle of spatial intersection. Universities may also lie within several isochrones, especially when accessibility times are long (30–35 minutes). Therefore, the demand for each university is divided among all the zones within which it falls. This method eliminates artificial doubling of demand and creates a balanced distribution that reflects the real impact of universities on the housing market within their accessibility zones. The final demand values are aggregated at the market area level and can be compared with the distributed student accommodation capacity.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ndwR8hdR5D"}],"key":"O8buv3AU9n"}],"key":"IZMFEagI7K"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"for time_min in isochrone_times:\n    # Load isochrone data\n    iso_file = f\"{base_path}/iso_without_data_{time_min}_min.gpkg\"\n    iso_gdf = gpd.read_file(iso_file)\n    \n    # Reproject immediately\n    if iso_gdf.crs != \"EPSG:25833\":\n        iso_gdf = iso_gdf.to_crs(\"EPSG:25833\")\n\n    # Build multipolygons per tt_id \n    iso_multi = (\n        iso_gdf.groupby([\"tt_id\", \"origin_lon\", \"origin_lat\"])\n        .geometry.apply(lambda g: MultiPolygon([geom for geom in g]))\n        .reset_index()\n    )\n    iso_multi_gdf = gpd.GeoDataFrame(iso_multi, geometry=\"geometry\", crs=\"EPSG:25833\")\n\n    # Prepare central places (no geometry needed for merge)\n    central_places_no_geom = central_places.drop(columns=\"geometry\")\n    central_places_no_geom[\"lon\"] = central_places_no_geom[\"lon\"].astype(float)\n\n    # Merge on origin_lon/lon\n    iso_multi_gdf[\"origin_lon\"] = iso_multi_gdf[\"origin_lon\"].astype(float)\n    iso_dem = iso_multi_gdf.merge(\n        central_places_no_geom,\n        left_on=\"origin_lon\",\n        right_on=\"lon\"\n    )\n    iso_dem = gpd.GeoDataFrame(iso_dem, geometry=\"geometry\", crs=\"EPSG:25833\")\n    iso_dem = iso_dem.drop(columns=[\"origin_lon\", \"url\"])\n    iso_dem[\"geometry\"] = iso_dem[\"geometry\"].buffer(0)   # fix invalids\n\n    # From here everything is already in EPSG:25833\n    pbsa_cap_ready = pbsa_cap.copy()\n    if \"pbsa_id\" not in pbsa_cap_ready.columns:\n        pbsa_cap_ready[\"pbsa_id\"] = pbsa_cap_ready.index\n    \n    iso_dem_ready = iso_dem.copy()\n    if \"iso_id\" not in iso_dem_ready.columns:\n        iso_dem_ready[\"iso_id\"] = iso_dem_ready.index\n    \n    uni_dem = uni_dem.copy()\n    if 'uni_id' not in uni_dem.columns:\n        uni_dem['uni_id'] = uni_dem.index\n\n    # PBSA allocation\n    join_pbsa = gpd.sjoin(pbsa_cap_ready, iso_dem_ready, how=\"inner\", predicate=\"intersects\")\n    n_iso_pbsa = join_pbsa.groupby(\"pbsa_id\")[\"iso_id\"].nunique().rename(\"n_iso_pbsa\")\n    join_pbsa = join_pbsa.merge(n_iso_pbsa, left_on=\"pbsa_id\", right_index=True, how=\"left\")\n    cap_cols = [\"!cap\"]\n    for c in cap_cols:\n        join_pbsa[f\"{c}_sum\"] = join_pbsa[c] / join_pbsa[\"n_iso_pbsa\"]\n    iso_alloc_pbsa = (\n        join_pbsa.groupby(\"iso_id\")[[f\"{c}_sum\" for c in cap_cols]]\n        .sum().reset_index()\n    )\n    \n    # --- UNI allocation ---\n    join_uni = gpd.sjoin(uni_dem, iso_dem_ready, how='inner', predicate='intersects')\n    n_iso_uni = join_uni.groupby('uni_id')['iso_id'].nunique().rename('n_iso_uni')\n    join_uni = join_uni.merge(n_iso_uni, left_on='uni_id', right_index=True, how='left')\n    dem_cols = ['!s_aus_left', '!s_de_left', '!s_all_left']\n    for c in dem_cols:\n        join_uni[f'{c}_sum'] = join_uni[c] / join_uni['n_iso_uni']\n    iso_alloc_uni = (join_uni.groupby('iso_id')[[f'{c}_sum' for c in dem_cols]]\n                 .sum()\n                 .reset_index())\n    \n    # Merge results\n    market_area = iso_dem_ready.merge(iso_alloc_pbsa, on=\"iso_id\", how=\"left\")\n    market_area = market_area.merge(iso_alloc_uni, on=\"iso_id\", how=\"left\")\n    \n    market_area = market_area.rename(columns={\n        \"!s_aus_left_sum\": \"!s_aus_sum\",\n        \"!s_de_left_sum\": \"!s_de_sum\",\n        \"!s_all_left_sum\": \"!s_all_sum\",\n    })\n    \n    # Ratios\n    market_area[\"capacity_demand_ratio\"] = (\n        market_area[\"!cap_sum\"] / market_area[\"!s_aus_sum\"].replace(0, np.inf)\n    )\n    market_area[\"demand_capacity_pressure\"] = (\n        market_area[\"!s_aus_sum\"] / market_area[\"!cap_sum\"].replace(0, np.inf)\n    )\n    market_area[\"area\"] = market_area.geometry.area / 1e6 # in sq km\n    \n    # PBSA count\n    pbsa_pts = pbsa_cap_ready.copy()\n    wb = gpd.sjoin(pbsa_pts, market_area[[\"iso_id\", \"geometry\"]], how=\"inner\", predicate=\"within\")\n    pbsa_counts = wb.groupby(\"iso_id\").size()\n    market_area[\"pbsa_count\"] = market_area[\"iso_id\"].map(pbsa_counts).fillna(0).astype(int)\n\n    # Uni Count \n    uni_pts = uni_dem.copy()   # again, geometry is already active\n    # Spatial join: UNI point within isochrone polygon\n    wb = gpd.sjoin(uni_pts, market_area[['iso_id', 'geometry']], how='inner', predicate='within')\n    # Count UNI per iso_id\n    uni_counts = wb.groupby('iso_id').size()\n    # Attach to market_area – fill missing with 0\n    market_area['uni_count'] = market_area['iso_id'].map(uni_counts).fillna(0).astype(int)\n    \n    # Travel time\n    market_area[\"travel_time_min\"] = time_min\n    \n    #Cleaning \n    market_area['cluster'] = market_area['cluster'].map({\n    'HH': 'High-High (HH)',\n    'HL': 'High-Low (HL)', \n    'LH': 'Low-High (LH)',\n    'LL': 'Low-Low (LL)',\n    'NS': 'Not Significant (NS)'\n    })\n    columns_to_drop = ['origin_lat', 'origin_lon', 'cluster_aus', 'iso_id', 'lon']\n    market_area = market_area.drop(columns=columns_to_drop, errors='ignore')\n\n    # Save\n    output_file = f\"{base_path}/market_areas_{time_min}_min.gpkg\"\n    market_area.to_file(output_file, driver=\"GPKG\")\n    \n    # Summary stats\n    total_capacity_inside = market_area[\"!cap_sum\"].sum()\n    total_demand_inside = market_area[\"!s_aus_sum\"].sum()\n\n    uncovered_demand = total_demand_complete - total_demand_inside\n    unused_capacity = total_capacity_complete - total_capacity_inside\n    \n    results_summary.append({\n        \"travel_time_min\": time_min,\n        \"total_capacity_inside\": total_capacity_inside,\n        \"total_demand_inside\": total_demand_inside,\n        \"uncovered_demand\": uncovered_demand,\n        \"unused_capacity\": unused_capacity,\n        # \"market_areas_count\": len(market_area),\n        # \"market_areas_with_capasity\": len(market_area[market_area['!cap_sum'].notnull()]),\n    })","key":"cLe7OgFg7c"},{"type":"outputs","id":"UGX3wIJTEX9j1LVSu5tQF","children":[],"key":"dW5qNYhBPL"}],"key":"THErzdSQfk"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"By changing the time thresholds, it is possible to check the stability of market areas: whether the structure of supply and demand zones changes or remains stable. To do this, at the final stage, a summary of key indicators is formed for each tested time of availability, allowing us to assess how effectively the formed market areas reflect the real structure of supply and demand. The table (Table XX) contains: the total capacity of dormitories that fall within the isochrones (","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"AeOUEGwlzr"},{"type":"inlineCode","value":"total_capacity_inside","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dR3Bn4SQWT"},{"type":"text","value":") and the total university demand covered by these same areas (","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dCSbP2WTDn"},{"type":"inlineCode","value":"total_demand_inside","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YbvUOR9vAe"},{"type":"text","value":").","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jmiQAZ6L3t"}],"key":"znGstjNZhG"}],"key":"E4lbGUhSZB"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Create summary DataFrame\nsummary_df = []\n\nsummary_df = pd.DataFrame(results_summary).round(1)\n\nsummary_df.sort_values(\"travel_time_min\", inplace=True)\n\nsummary_df","key":"MTF8BRIY3w"},{"type":"outputs","id":"ZqzRvDKg8HbNDsr_OfgZw","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":17,"metadata":{},"data":{"application/vnd.microsoft.datawrangler.viewer.v0+json":{"content":"{\"columns\":[{\"name\":\"index\",\"rawType\":\"int64\",\"type\":\"integer\"},{\"name\":\"travel_time_min\",\"rawType\":\"int64\",\"type\":\"integer\"},{\"name\":\"total_capacity_inside\",\"rawType\":\"float64\",\"type\":\"float\"},{\"name\":\"total_demand_inside\",\"rawType\":\"float64\",\"type\":\"float\"},{\"name\":\"uncovered_demand\",\"rawType\":\"float64\",\"type\":\"float\"},{\"name\":\"unused_capacity\",\"rawType\":\"float64\",\"type\":\"float\"}],\"ref\":\"e21bfca2-e5ea-42ab-a0cd-402f015fbad6\",\"rows\":[[\"0\",\"10\",\"3001.0\",\"32358.5\",\"16098.3\",\"22816.0\"],[\"1\",\"15\",\"6191.0\",\"44461.9\",\"3994.9\",\"19626.0\"],[\"2\",\"20\",\"9089.0\",\"45344.2\",\"3112.6\",\"16728.0\"],[\"3\",\"25\",\"15195.0\",\"46592.4\",\"1864.4\",\"10622.0\"],[\"4\",\"30\",\"17841.0\",\"46976.1\",\"1480.6\",\"7976.0\"],[\"5\",\"35\",\"20635.0\",\"47224.8\",\"1232.0\",\"5182.0\"]],\"shape\":{\"columns\":5,\"rows\":6}}","content_type":"application/vnd.microsoft.datawrangler.viewer.v0+json"},"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>travel_time_min</th>\n      <th>total_capacity_inside</th>\n      <th>total_demand_inside</th>\n      <th>uncovered_demand</th>\n      <th>unused_capacity</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>10</td>\n      <td>3001.0</td>\n      <td>32358.5</td>\n      <td>16098.3</td>\n      <td>22816.0</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>15</td>\n      <td>6191.0</td>\n      <td>44461.9</td>\n      <td>3994.9</td>\n      <td>19626.0</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>20</td>\n      <td>9089.0</td>\n      <td>45344.2</td>\n      <td>3112.6</td>\n      <td>16728.0</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>25</td>\n      <td>15195.0</td>\n      <td>46592.4</td>\n      <td>1864.4</td>\n      <td>10622.0</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>30</td>\n      <td>17841.0</td>\n      <td>46976.1</td>\n      <td>1480.6</td>\n      <td>7976.0</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>35</td>\n      <td>20635.0</td>\n      <td>47224.8</td>\n      <td>1232.0</td>\n      <td>5182.0</td>\n    </tr>\n  </tbody>\n</table>\n</div>","content_type":"text/html"},"text/plain":{"content":"   travel_time_min  total_capacity_inside  total_demand_inside  \\\n0               10                 3001.0              32358.5   \n1               15                 6191.0              44461.9   \n2               20                 9089.0              45344.2   \n3               25                15195.0              46592.4   \n4               30                17841.0              46976.1   \n5               35                20635.0              47224.8   \n\n   uncovered_demand  unused_capacity  \n0           16098.3          22816.0  \n1            3994.9          19626.0  \n2            3112.6          16728.0  \n3            1864.4          10622.0  \n4            1480.6           7976.0  \n5            1232.0           5182.0  ","content_type":"text/plain"}}},"children":[],"key":"bs5I9L6UzF"}],"key":"v2LOCfDrna"}],"key":"fdvBhamzxa"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Table XX. Travel Time Summary Statistics","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OV9Gk0dVYq"}],"key":"ulHKb4db3r"}],"key":"Twu1zlXOJG"}],"key":"Kd2ZMmuc8B"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"output_path = r\"../outputs/3.2_central_place_analysis/market_area_travel_time.xlsx\" \nwith pd.ExcelWriter(output_path, engine='openpyxl') as writer:\n    summary_df.to_excel(writer, sheet_name='base')","key":"cV8jOhQBTO"},{"type":"outputs","id":"K-5K7w_5g8ocKzKCB8Rzw","children":[],"key":"Cat6yMwF7o"}],"key":"GsEfGyYCoH"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Comparing these indicators between different time thresholds (10–35 minutes) (Figure XX) allows us to determine the optimal radius of market influence of universities, as well as to identify structural imbalances between supply and demand associated with spatial constraints. This approach provides a quantitative basis for selecting the isochrone threshold and correctly forming market areas.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"n1ugwiTlqN"}],"key":"TfVXLTSF4W"}],"key":"a1WMvZ1eMQ"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Get the total values for percentage calculation\ntotal_demand_complete = uni_dem['!s_aus'].sum()  # You'll need to load uni_dem data\ntotal_capacity_complete = pbsa_cap['!cap'].sum()\n\n# Create the figure and axis\nfig, ax = plt.subplots(figsize=(12, 12))\n\n# Set up the bar positions\nx = np.arange(len(summary_df))\nwidth = 0.35\n\n# Calculate percentages\ndemand_percentages = (summary_df['total_demand_inside'] / total_demand_complete) * 100\ncapacity_percentages = (summary_df['total_capacity_inside'] / total_capacity_complete) * 100\n\n\ndemand_coeffs    = np.polyfit(x, demand_percentages, 1)\ncapacity_coeffs  = np.polyfit(x, capacity_percentages, 1)\n\n# Prepare a smooth x array for plotting the line\nx_smooth = np.linspace(-0.5, len(summary_df)-0.5, 200)\n\n# Evaluate the fitted lines\ndemand_trend    = np.polyval(demand_coeffs, x_smooth)\ncapacity_trend  = np.polyval(capacity_coeffs, x_smooth)\n\n# Plot the trend lines\nax.plot(x_smooth, demand_trend,   color='#F08080',   lw=1.5, linestyle='--', label='demand trend')\nax.plot(x_smooth, capacity_trend, color='#F49F7D', lw=1.5, linestyle='--', label='capacity trend')\n\n# Create bars\ndemand_bars = ax.bar(x - width/2, demand_percentages, width, label='total demand inside', \n                     color='#FAE1DD', alpha=1, linewidth=1)\ncapacity_bars = ax.bar(x + width/2, capacity_percentages, width, label='total capasity inside', \n                       color='#FFD7BA', alpha=1,  linewidth=1)\n\n\n\n# Prepare a smooth x array for plotting the line\nx_smooth = np.linspace(-0.5, len(summary_df)-0.5, 200)\n\n# Customize the plot\nax.set_ylim(0, 101)                # a bit of head‑room for the trend lines\nax.set_yticks(np.arange(0, 101, 10))   # 0,10,20,...,100\nax.set_xlabel('travel time')\nax.set_ylabel('percentage of total')\nax.set_title('Market Areas Demand-Capacity Coverage by Travel Time', fontsize=12, pad=8, fontweight='bold')\nax.set_xticks(x)\nax.set_xticklabels(summary_df['travel_time_min'])\nplt.legend(loc='best', frameon=False)\nax.grid(True, alpha=0.3, axis='y')\n\n# Add percentage labels on bars\ndef add_labels(bars, percentages):\n    for bar, percentage in zip(bars, percentages):\n        height = bar.get_height()\n        ax.text(bar.get_x() + bar.get_width()/2., height + 0.5,\n                f'{percentage:.0f}%', ha='center', va='bottom', fontsize=10)\n\nadd_labels(demand_bars, demand_percentages)\nadd_labels(capacity_bars, capacity_percentages)\n\nplt.tight_layout()\n\nsave_path = os.path.join(hf, \"Market Areas Demand-Capacity Coverage by Travel Time.png\")\nplt.savefig(save_path, dpi=300, bbox_inches=\"tight\")\n\nplt.show()","visibility":"remove","key":"frVuJDv9Dh"},{"type":"outputs","id":"XhAmehdoO07yLxuLaEaZR","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"2c1b49220938c8317675d305072cc7f8","path":"/rethinking_student_housing/build/2c1b49220938c8317675d305072cc7f8.png"},"text/plain":{"content":"<Figure size 1200x1200 with 1 Axes>","content_type":"text/plain"}}},"children":[],"key":"N3UvX26NiL"}],"visibility":"show","key":"GXFSrgUxHg"}],"visibility":"show","key":"sWGlfRihh4"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Figure XX. Market Areas Demand-Capacity Coverage by Travel Time","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WoKA3nJDhG"}],"key":"WjkgQxlFSG"}],"key":"NgLJSCNt8U"}],"key":"XobG7pojI0"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The results of the travel time test demonstrate that increasing the time threshold for accessibility significantly affects the degree of coverage of university demand and the capacity of student housing included in market areas. However, the effect grows unevenly, and it is precisely this dynamic that allows us to determine the optimal travel time value.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"NrxfMLtYrg"}],"key":"rShNsgsPnt"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"First, at thresholds of 10–25 minutes, there is a significant discrepancy between the share of demand covered and the share of capacity included. For example, at 25 minutes, the market already covers 96% of total demand, but only 59% of housing capacity. This imbalance indicates that with short isochrones, a significant portion of dormitories remain formally ‘outside the market,’ which leads to artificially inflated estimates of the deficit and local market pressure.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"TdPfQagW2Y"}],"key":"Tl1ldmBcgs"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Secondly, starting at 30 minutes, the volume of included capacity increases sharply, reaching 69%, and by 35 minutes, 80%, which reflects a significant improvement in the spatial correspondence between university demand and student accommodation capacity. At the same time, there is no further noticeable growth in demand coverage: even at 20 minutes, more than 94% of student demand is covered, and at 30–35 minutes, 97%. This means that an increase in travel time in this range mainly affects the housing supply rather than changing the demand pattern.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"p1A86VBQVI"}],"key":"zruDxqvNKL"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Thus, the 35-minute threshold represents an optimal compromise.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"x733k8lH21"}],"key":"tahPXMiOIY"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Moreover, according to a study by Menz & Mandl (2024), students studying mostly in person spend 5 hours more per week on study-related activities compared to students studying mostly online. Thus, it can be concluded that full-time students spend an additional 5 hours per week commuting, which is equivalent to approximately 1 hour per day or 30 minutes each way.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"t4t5Xw3M2Z"}],"key":"yvnHgQOcjd"}],"key":"l16RLhrtMF"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Market Areas Analysis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"vZceQGYrB8"}],"identifier":"market-areas-analysis","label":"Market Areas Analysis","html_id":"market-areas-analysis","implicit":true,"key":"b5nAO0IDb3"}],"key":"tEdVXPHKcV"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Spatial economics and central place metrics were used to analyse market areas (Table XX).","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZAWSGM3FXq"}],"key":"f67ykWZqdp"}],"key":"SlAjSoJt0J"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"market_area[[\n    \"code\",\n    \"name\",\n    \"own\",\n    \"cluster\",\n    \"!cap_sum\",\n    \"!s_aus_sum\",\n    \"!s_de_sum\",\n    \"!s_all_sum\"\n]].round(1)\n\n#market_area.describe().round(1)","visibility":"remove","key":"JDCP4FBBMg"},{"type":"outputs","id":"_Wh1LOjHhXkCzOQlK-u9d","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":20,"metadata":{},"data":{"application/vnd.microsoft.datawrangler.viewer.v0+json":{"content":"{\"columns\":[{\"name\":\"index\",\"rawType\":\"int64\",\"type\":\"integer\"},{\"name\":\"code\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"name\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"own\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"cluster\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"!cap_sum\",\"rawType\":\"float64\",\"type\":\"float\"},{\"name\":\"!s_aus_sum\",\"rawType\":\"float64\",\"type\":\"float\"},{\"name\":\"!s_de_sum\",\"rawType\":\"float64\",\"type\":\"float\"},{\"name\":\"!s_all_sum\",\"rawType\":\"float64\",\"type\":\"float\"}],\"ref\":\"0cc401bc-8cf0-40c7-90fb-6094be216351\",\"rows\":[[\"0\",\"HS0180\",\"Charite - Universitätsmedizin Berlin\",\"Public University\",\"Low-High (LH)\",\"1455.4\",\"3072.6\",\"8126.0\",\"11198.7\"],[\"1\",\"HS0180\",\"Charite - Universitätsmedizin Berlin\",\"Public University\",\"High-Low (HL)\",\"511.5\",\"2563.9\",\"10281.7\",\"12845.5\"],[\"2\",\"HS5802\",\"U of Europe for Appl.Sc.Potsdam i.Berlin \",\"Privat University\",\"Low-High (LH)\",\"1594.8\",\"3520.2\",\"9143.1\",\"12663.4\"],[\"3\",\"HS7690\",\"Hochschule für Technik und Wirtschaft Berlin \",\"Public University\",\"Low-High (LH)\",\"3808.8\",\"4446.4\",\"19321.6\",\"23768.1\"],[\"4\",\"HS7710\",\"Berliner Hochschule für Technik \",\"Public University\",\"Low-High (LH)\",\"1409.9\",\"3023.1\",\"7929.0\",\"10952.1\"],[\"5\",\"HS7721\",\"HWR Berlin, FB Wirtschaft \",\"Public University\",\"High-High (HH)\",\"884.2\",\"5449.5\",\"16643.3\",\"22092.8\"],[\"6\",\"HS7971\",\"SRH Berlin U of Appl. Sciences in Berlin \",\"Privat University\",\"Low-High (LH)\",\"1687.0\",\"1244.6\",\"1773.3\",\"3017.9\"],[\"7\",\"HS0200\",\"Humboldt-Universität Berlin\",\"Public University\",\"Low-High (LH)\",\"1245.5\",\"4352.1\",\"18945.9\",\"23297.9\"],[\"8\",\"HS0200\",\"Humboldt-Universität Berlin\",\"Public University\",\"Low-High (LH)\",\"2000.0\",\"3190.8\",\"9539.3\",\"12730.1\"],[\"9\",\"HS1380\",\"Freie Universität Berlin\",\"Public University\",\"Low-High (LH)\",\"885.8\",\"2739.1\",\"10922.5\",\"13661.6\"],[\"10\",\"HS1690\",\"Technische Universität Berlin\",\"Public University\",\"Low-High (LH)\",\"831.0\",\"2567.9\",\"6318.9\",\"8886.8\"],[\"11\",\"HS1700\",\"ESCP-Europe Wirtschaftshochschule Berlin \",\"Privat University\",\"High-High (HH)\",\"588.2\",\"1619.2\",\"3540.3\",\"5159.6\"],[\"12\",\"HS2290\",\"Berlin Int. Univ. of Applied Sciences \",\"Privat University\",\"High-Low (HL)\",\"1201.0\",\"3196.7\",\"8005.7\",\"11202.5\"],[\"13\",\"HS2790\",\"Universität der Künste Berlin\",\"Public University\",\"High-High (HH)\",\"2280.6\",\"5760.5\",\"17545.6\",\"23306.2\"],[\"14\",\"HS3270\",\"German International University Berlin \",\"Privat University\",\"High-Low (HL)\",\"251.3\",\"478.0\",\"0.0\",\"478.0\"]],\"shape\":{\"columns\":8,\"rows\":15}}","content_type":"application/vnd.microsoft.datawrangler.viewer.v0+json"},"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>code</th>\n      <th>name</th>\n      <th>own</th>\n      <th>cluster</th>\n      <th>!cap_sum</th>\n      <th>!s_aus_sum</th>\n      <th>!s_de_sum</th>\n      <th>!s_all_sum</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>HS0180</td>\n      <td>Charite - Universitätsmedizin Berlin</td>\n      <td>Public University</td>\n      <td>Low-High (LH)</td>\n      <td>1455.4</td>\n      <td>3072.6</td>\n      <td>8126.0</td>\n      <td>11198.7</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>HS0180</td>\n      <td>Charite - Universitätsmedizin Berlin</td>\n      <td>Public University</td>\n      <td>High-Low (HL)</td>\n      <td>511.5</td>\n      <td>2563.9</td>\n      <td>10281.7</td>\n      <td>12845.5</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>HS5802</td>\n      <td>U of Europe for Appl.Sc.Potsdam i.Berlin</td>\n      <td>Privat University</td>\n      <td>Low-High (LH)</td>\n      <td>1594.8</td>\n      <td>3520.2</td>\n      <td>9143.1</td>\n      <td>12663.4</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>HS7690</td>\n      <td>Hochschule für Technik und Wirtschaft Berlin</td>\n      <td>Public University</td>\n      <td>Low-High (LH)</td>\n      <td>3808.8</td>\n      <td>4446.4</td>\n      <td>19321.6</td>\n      <td>23768.1</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>HS7710</td>\n      <td>Berliner Hochschule für Technik</td>\n      <td>Public University</td>\n      <td>Low-High (LH)</td>\n      <td>1409.9</td>\n      <td>3023.1</td>\n      <td>7929.0</td>\n      <td>10952.1</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>HS7721</td>\n      <td>HWR Berlin, FB Wirtschaft</td>\n      <td>Public University</td>\n      <td>High-High (HH)</td>\n      <td>884.2</td>\n      <td>5449.5</td>\n      <td>16643.3</td>\n      <td>22092.8</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>HS7971</td>\n      <td>SRH Berlin U of Appl. Sciences in Berlin</td>\n      <td>Privat University</td>\n      <td>Low-High (LH)</td>\n      <td>1687.0</td>\n      <td>1244.6</td>\n      <td>1773.3</td>\n      <td>3017.9</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>HS0200</td>\n      <td>Humboldt-Universität Berlin</td>\n      <td>Public University</td>\n      <td>Low-High (LH)</td>\n      <td>1245.5</td>\n      <td>4352.1</td>\n      <td>18945.9</td>\n      <td>23297.9</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>HS0200</td>\n      <td>Humboldt-Universität Berlin</td>\n      <td>Public University</td>\n      <td>Low-High (LH)</td>\n      <td>2000.0</td>\n      <td>3190.8</td>\n      <td>9539.3</td>\n      <td>12730.1</td>\n    </tr>\n    <tr>\n      <th>9</th>\n      <td>HS1380</td>\n      <td>Freie Universität Berlin</td>\n      <td>Public University</td>\n      <td>Low-High (LH)</td>\n      <td>885.8</td>\n      <td>2739.1</td>\n      <td>10922.5</td>\n      <td>13661.6</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>HS1690</td>\n      <td>Technische Universität Berlin</td>\n      <td>Public University</td>\n      <td>Low-High (LH)</td>\n      <td>831.0</td>\n      <td>2567.9</td>\n      <td>6318.9</td>\n      <td>8886.8</td>\n    </tr>\n    <tr>\n      <th>11</th>\n      <td>HS1700</td>\n      <td>ESCP-Europe Wirtschaftshochschule Berlin</td>\n      <td>Privat University</td>\n      <td>High-High (HH)</td>\n      <td>588.2</td>\n      <td>1619.2</td>\n      <td>3540.3</td>\n      <td>5159.6</td>\n    </tr>\n    <tr>\n      <th>12</th>\n      <td>HS2290</td>\n      <td>Berlin Int. Univ. of Applied Sciences</td>\n      <td>Privat University</td>\n      <td>High-Low (HL)</td>\n      <td>1201.0</td>\n      <td>3196.7</td>\n      <td>8005.7</td>\n      <td>11202.5</td>\n    </tr>\n    <tr>\n      <th>13</th>\n      <td>HS2790</td>\n      <td>Universität der Künste Berlin</td>\n      <td>Public University</td>\n      <td>High-High (HH)</td>\n      <td>2280.6</td>\n      <td>5760.5</td>\n      <td>17545.6</td>\n      <td>23306.2</td>\n    </tr>\n    <tr>\n      <th>14</th>\n      <td>HS3270</td>\n      <td>German International University Berlin</td>\n      <td>Privat University</td>\n      <td>High-Low (HL)</td>\n      <td>251.3</td>\n      <td>478.0</td>\n      <td>0.0</td>\n      <td>478.0</td>\n    </tr>\n  </tbody>\n</table>\n</div>","content_type":"text/html"},"text/plain":{"content":"      code                                           name                own  \\\n0   HS0180           Charite - Universitätsmedizin Berlin  Public University   \n1   HS0180           Charite - Universitätsmedizin Berlin  Public University   \n2   HS5802      U of Europe for Appl.Sc.Potsdam i.Berlin   Privat University   \n3   HS7690  Hochschule für Technik und Wirtschaft Berlin   Public University   \n4   HS7710               Berliner Hochschule für Technik   Public University   \n5   HS7721                     HWR Berlin, FB Wirtschaft   Public University   \n6   HS7971      SRH Berlin U of Appl. Sciences in Berlin   Privat University   \n7   HS0200                    Humboldt-Universität Berlin  Public University   \n8   HS0200                    Humboldt-Universität Berlin  Public University   \n9   HS1380                       Freie Universität Berlin  Public University   \n10  HS1690                  Technische Universität Berlin  Public University   \n11  HS1700      ESCP-Europe Wirtschaftshochschule Berlin   Privat University   \n12  HS2290         Berlin Int. Univ. of Applied Sciences   Privat University   \n13  HS2790                  Universität der Künste Berlin  Public University   \n14  HS3270        German International University Berlin   Privat University   \n\n           cluster  !cap_sum  !s_aus_sum  !s_de_sum  !s_all_sum  \n0    Low-High (LH)    1455.4      3072.6     8126.0     11198.7  \n1    High-Low (HL)     511.5      2563.9    10281.7     12845.5  \n2    Low-High (LH)    1594.8      3520.2     9143.1     12663.4  \n3    Low-High (LH)    3808.8      4446.4    19321.6     23768.1  \n4    Low-High (LH)    1409.9      3023.1     7929.0     10952.1  \n5   High-High (HH)     884.2      5449.5    16643.3     22092.8  \n6    Low-High (LH)    1687.0      1244.6     1773.3      3017.9  \n7    Low-High (LH)    1245.5      4352.1    18945.9     23297.9  \n8    Low-High (LH)    2000.0      3190.8     9539.3     12730.1  \n9    Low-High (LH)     885.8      2739.1    10922.5     13661.6  \n10   Low-High (LH)     831.0      2567.9     6318.9      8886.8  \n11  High-High (HH)     588.2      1619.2     3540.3      5159.6  \n12   High-Low (HL)    1201.0      3196.7     8005.7     11202.5  \n13  High-High (HH)    2280.6      5760.5    17545.6     23306.2  \n14   High-Low (HL)     251.3       478.0        0.0       478.0  ","content_type":"text/plain"}}},"children":[],"key":"IfpMw6Dq7N"}],"visibility":"show","key":"pRrm2GA7le"}],"visibility":"show","key":"i6eFcpBo5z"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Table XX. Market Areas","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pzNwgRXNzf"}],"key":"IvqKoO7mEe"}],"key":"KaYCurCjt4"}],"key":"xQY11stHGd"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Spatial Economics Metrics","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mTpuBtCkGO"}],"identifier":"spatial-economics-metrics","label":"Spatial Economics Metrics","html_id":"spatial-economics-metrics","implicit":true,"key":"va2iy5WYF9"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Spatial Economics indicators are important for further calculation of capacity–demand balance and central place metrics.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"rGgO4FTO0d"}],"key":"nU1tFMgoEQ"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Capacity–Demand Ratio","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"MmEw5IU4fN"}],"key":"lADgQb3wYA"},{"type":"break","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"gkPL09fsAR"},{"type":"text","value":"This indicator reflects the ratio between the supply of student housing and university demand within each market area. It is calculated as the share of the total capacity of all student accommodation  in the market area relative to the total demand from international students (","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"mUj82XR1AQ"},{"type":"inlineCode","value":"market_area[‘capacity_demand_ratio’] = !cap_sum / !s_aus_sum","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"EDAyutIb95"},{"type":"text","value":").\nHigh ratio values indicate areas with a relative oversupply, while low values indicate a shortage of housing relative to demand. This indicator helps to identify areas where the market is potentially balanced or, conversely, under the pressure.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"LjnHkjPGxJ"}],"key":"F2Cb7VIVot"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"strong","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Demand–Capacity Pressure","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"msfqkae7Vn"}],"key":"uJSOZvugfa"},{"type":"break","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"fxTIeBrzVh"},{"type":"text","value":"This indicator is the inverse ratio and is calculated as the share of total university demand relative to student housing capacity (","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"pTpAh3htYr"},{"type":"inlineCode","value":"market_area[‘demand_capacity_pressure’] = !s_aus_sum / !cap_sum","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"HbxYe7iQDb"},{"type":"text","value":"). It is interpreted as the degree of market pressure: the higher the value, the greater the load on the available supply and the more acute the shortage.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"XgsOx32lUs"}],"key":"Jqe4ZPm9S4"},{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"strong","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Number of Student Accommodations","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"RjBEDIRTyB"}],"key":"VIpmeV4o5L"},{"type":"break","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"On5Pk2Ziui"},{"type":"text","value":"This indicator determines how many student accommodation facilities are located within a specific market area (","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"IyhujJS0uc"},{"type":"inlineCode","value":"pbsa_counts = wb.groupby(‘iso_id’).size()","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"pu06T7WD49"},{"type":"text","value":").","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"B5yW5qPNTh"}],"key":"mYLco3hdtb"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"strong","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Number of Higher Education Universities","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"b2wtOfpNIk"}],"key":"lIWz7yeo2h"},{"type":"break","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"JA7qGeTzTy"},{"type":"text","value":"This indicator reflects how many higher education institutions fall within the boundaries of the market area (","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"Q766E5Cr6U"},{"type":"inlineCode","value":"uni_counts = wb.groupby(“iso_id”).size()","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"qw6fYbmXZ8"},{"type":"text","value":").","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"fnGifp0dtJ"}],"key":"eaZaHoGcHo"},{"type":"paragraph","position":{"start":{"line":18,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"strong","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Market Area Size","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"wSfCOShxey"}],"key":"rLF50DB41A"},{"type":"break","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"jK91PbWWCD"},{"type":"text","value":"The area of each market area is calculated as the area of its geometry in square kilometres (","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"Mwv3t0YrmX"},{"type":"inlineCode","value":"market_area[‘area’] = market_area.geometry.area / 1e6","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"JSeV5vc9vz"},{"type":"text","value":").","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"To4Wc0MiVG"}],"key":"MeHFjifZcY"}],"key":"mI8LImqKzM"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The main result of the analysis of spatial economic metrics is the capacity–demand balance (Figure XX), which allows for a direct comparison of the aggregate demand of international students within each market area with the available supply of places in student accommodation.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cMlIWZjPUO"}],"key":"ov2FDg2hfr"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"As can be seen in the graph, in the vast majority of university market areas, university international demand significantly exceeds available student accommodation capacity. Almost all points are below the ideal equilibrium line (45°), indicating a structural supply shortage and systemic pressure on the student housing market. The size of the points reflects the degree of pressure on a particular university. The smallest pressure is on the market area formed by SRH Berlin University of Applied Sciences, where capacity exceeds demand. The greatest pressure is on the market area formed by the University of Business and Law, where demand exceeds capacity by 6.2 times.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"dWz6awqoBk"}],"key":"BDXulUph9K"}],"key":"rvtSI4PR4g"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"demand_median = market_area['!s_aus_sum'].median()\ncapacity_median = market_area['!cap_sum'].median()\n\nmpl.rcParams['font.family'] = 'Helvetica'\n\n# Plot\nf, ax = plt.subplots(1, figsize=(12, 12))\nx_min, x_max = 0, 6000  # For capacity_demand_ratio.clip(0, 5)\ny_min, y_max = 0, 6000  \n\nax.scatter(market_area['!s_aus_sum'], market_area['!cap_sum'], color = market_area['color'], s=(market_area['demand_capacity_pressure'])*25, alpha=0.75)\n\nfor idx, row in market_area.iterrows():\n    offset = 10\n    ax.annotate(row['abr'], #abr\n        xy=(row['!s_aus_sum'], row['!cap_sum']),  # Original point position\n        xytext=(0, offset),  # Move text 5 points upward from the point\n        textcoords='offset points',  # Use offset coordinates for xytext\n        color='#999999', \n        fontsize=8, \n        alpha=1,\n        ha='center',    # Horizontal alignment: center\n        va='bottom' if idx % 2 == 0 else 'bottom'     # Vertical alignment: bottom of text above point\n    )\n\nax.axhline(capacity_median, color='#cccccc', linestyle='--', alpha=0.5)\nax.axvline(demand_median, color='#cccccc', linestyle='--', alpha=0.5)\nax.set_xlabel('university international demand (!s_aus_sum)')\nax.set_ylabel('student accommodation capasity (!cap_sum)')\nax.set_title('Market Areas Capacity Demand Balance', fontsize=12, pad=8, fontweight='bold')\nax.axline((0, 0), slope=1, color='#F4978E', linestyle='--', alpha=0.7, label='Perfect Balance')\nax.set_xlim(x_min, x_max)\nax.set_ylim(y_min, y_max)\nplt.grid(True, color='#cccccc', linestyle='--', alpha=0.3)\nplt.legend(loc='upper right', frameon=False)\n\nsave_path = os.path.join(hf, \"Market Areas Capacity Demand Balance.png\")\nplt.savefig(save_path, dpi=300, bbox_inches=\"tight\")\n\nplt.show()","visibility":"remove","key":"WI6y51fARf"},{"type":"outputs","id":"X1mqcTa6ipXN4eAWscemT","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"748ac17f0f2e370b6b64758ba60fcbfd","path":"/rethinking_student_housing/build/748ac17f0f2e370b6b64758ba60fcbfd.png"},"text/plain":{"content":"<Figure size 1200x1200 with 1 Axes>","content_type":"text/plain"}}},"children":[],"key":"jBoZepSKMA"}],"visibility":"show","key":"YEoEE21Plq"}],"visibility":"show","key":"yLPmdMXOIZ"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Figure XX. Market Areas Capacity Demand Balance","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GRRsyznAi3"}],"key":"NwMc8d0hnG"}],"key":"XpojY2FiCM"}],"key":"YVCjA2kA4G"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Central Place Metrics","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ryArkeZClI"}],"identifier":"central-place-metrics","label":"Central Place Metrics","html_id":"central-place-metrics","implicit":true,"key":"FRZsMHDOMC"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Centrality","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"qXJWmHiOzq"}],"key":"xj2utxPvTV"},{"type":"break","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"YxNKo57s9g"},{"type":"text","value":"The first challenge was to find some way of measuring the centrality of an urban place (King, 1986). To calculate centrality Godlund (1956) used the following formula:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"AZeXvIh05U"}],"key":"wMh6r7hbgC"},{"type":"math","value":"C \\;=\\; \\sqrt{\\,(B)\\,(m) \\;-\\; (P)\\,(k)\\,}","position":{"start":{"line":6,"column":1},"end":{"line":8,"column":1}},"html":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>C</mi><mtext>  </mtext><mo>=</mo><mtext>  </mtext><msqrt><mrow><mtext> </mtext><mo stretchy=\"false\">(</mo><mi>B</mi><mo stretchy=\"false\">)</mo><mtext> </mtext><mo stretchy=\"false\">(</mo><mi>m</mi><mo stretchy=\"false\">)</mo><mtext>  </mtext><mo>−</mo><mtext>  </mtext><mo stretchy=\"false\">(</mo><mi>P</mi><mo stretchy=\"false\">)</mo><mtext> </mtext><mo stretchy=\"false\">(</mo><mi>k</mi><mo stretchy=\"false\">)</mo><mtext> </mtext></mrow></msqrt></mrow><annotation encoding=\"application/x-tex\">C \\;=\\; \\sqrt{\\,(B)\\,(m) \\;-\\; (P)\\,(k)\\,}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.24em;vertical-align:-0.2561em;\"></span><span class=\"mord sqrt\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9839em;\"><span class=\"svg-align\" style=\"top:-3.2em;\"><span class=\"pstrut\" style=\"height:3.2em;\"></span><span class=\"mord\" style=\"padding-left:1em;\"><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">m</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span></span></span><span style=\"top:-2.9439em;\"><span class=\"pstrut\" style=\"height:3.2em;\"></span><span class=\"hide-tail\" style=\"min-width:1.02em;height:1.28em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width='400em' height='1.28em' viewBox='0 0 400000 1296' preserveAspectRatio='xMinYMin slice'><path d='M263,681c0.7,0,18,39.7,52,119\nc34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120\nc340,-704.7,510.7,-1060.3,512,-1067\nl0 -0\nc4.7,-7.3,11,-11,19,-11\nH40000v40H1012.3\ns-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232\nc-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1\ns-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26\nc-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z\nM1001 80h400000v40h-400000z'/></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2561em;\"><span></span></span></span></span></span></span></span></span></span>","enumerator":"1","key":"bp7khkXpGr"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"where:","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"L3eBuWgeZL"}],"key":"fsHlWSBAmh"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"B — a count of the number of shops in the place\nm — a weighting factor that took into account the comparative average size of the shops","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"njDXVRjOHd"},{"type":"break","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"LXdPsCijTt"},{"type":"text","value":"P — the population of the town","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"MMHLMzIo0W"},{"type":"break","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"BqVXVi8MN5"},{"type":"text","value":"k — was an index of the average accessibility to retail trade services enjoyed by any one inhabitant of the larger region in which the central place was located","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"aHI0p3Z5hn"}],"key":"gUvb9q5EDY"},{"type":"paragraph","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"In a study of the student housing market, centrality can be determined using a modified version of Godlund’s formula.","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"EF8pw9mOGA"}],"key":"BcuJrHxr5B"},{"type":"math","value":"C \\;=\\; \\sqrt{\\,(Csa +Cuni)\\,(m) \\;-\\; (D)\\,(Ci/Di)\\,}","position":{"start":{"line":20,"column":1},"end":{"line":22,"column":1}},"html":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>C</mi><mtext>  </mtext><mo>=</mo><mtext>  </mtext><msqrt><mrow><mtext> </mtext><mo stretchy=\"false\">(</mo><mi>C</mi><mi>s</mi><mi>a</mi><mo>+</mo><mi>C</mi><mi>u</mi><mi>n</mi><mi>i</mi><mo stretchy=\"false\">)</mo><mtext> </mtext><mo stretchy=\"false\">(</mo><mi>m</mi><mo stretchy=\"false\">)</mo><mtext>  </mtext><mo>−</mo><mtext>  </mtext><mo stretchy=\"false\">(</mo><mi>D</mi><mo stretchy=\"false\">)</mo><mtext> </mtext><mo stretchy=\"false\">(</mo><mi>C</mi><mi>i</mi><mi mathvariant=\"normal\">/</mi><mi>D</mi><mi>i</mi><mo stretchy=\"false\">)</mo><mtext> </mtext></mrow></msqrt></mrow><annotation encoding=\"application/x-tex\">C \\;=\\; \\sqrt{\\,(Csa +Cuni)\\,(m) \\;-\\; (D)\\,(Ci/Di)\\,}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.24em;vertical-align:-0.2561em;\"></span><span class=\"mord sqrt\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9839em;\"><span class=\"svg-align\" style=\"top:-3.2em;\"><span class=\"pstrut\" style=\"height:3.2em;\"></span><span class=\"mord\" style=\"padding-left:1em;\"><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">a</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">ni</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">m</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord mathnormal\">i</span><span class=\"mord\">/</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord mathnormal\">i</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span></span></span><span style=\"top:-2.9439em;\"><span class=\"pstrut\" style=\"height:3.2em;\"></span><span class=\"hide-tail\" style=\"min-width:1.02em;height:1.28em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width='400em' height='1.28em' viewBox='0 0 400000 1296' preserveAspectRatio='xMinYMin slice'><path d='M263,681c0.7,0,18,39.7,52,119\nc34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120\nc340,-704.7,510.7,-1060.3,512,-1067\nl0 -0\nc4.7,-7.3,11,-11,19,-11\nH40000v40H1012.3\ns-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232\nc-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1\ns-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26\nc-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z\nM1001 80h400000v40h-400000z'/></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2561em;\"><span></span></span></span></span></span></span></span></span></span>","enumerator":"2","key":"LMxkmE99M9"},{"type":"paragraph","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"where:","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"n5o8No2ouJ"}],"key":"YWOIGW94Km"},{"type":"paragraph","position":{"start":{"line":26,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"Csa +Cuni — a sum of the number of student accommodations and higher education  universities in the market area","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"xwya1Q90Je"},{"type":"break","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"NnhicOBLaG"},{"type":"text","value":"m — is a constant calculated during manual tests (","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"F5HDm6HxgU"},{"type":"inlineCode","value":"m=50","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"NHjCC41Cdw"},{"type":"text","value":")","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"MexbvuYzEm"},{"type":"break","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"oVwInEa2pb"},{"type":"text","value":"D — the total international demand","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"McVUh56rs7"},{"type":"break","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"CuD9rGaAkN"},{"type":"text","value":"Ci/Di — a capacity-demand ratio","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"Di5OCJWtN6"}],"key":"OuSeHbbUgu"}],"key":"lhrceqrwBa"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"market_area[\"!s_aus_sum\"] = market_area[\"!s_aus_sum\"].round(3)","visibility":"show","key":"sQpixPcOqy"},{"type":"outputs","id":"WAsLTVUJAre68F_An5nj5","children":[],"visibility":"show","key":"gCeD52prEr"}],"visibility":"remove","key":"qX2bzUX0O3"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"m = 50\n\nmarket_area[\"centrality\"] = np.sqrt(((market_area[\"pbsa_count\"] + market_area[\"uni_count\"]) * m) - \n                                    (market_area[\"!s_aus_sum\"] * market_area[\"capacity_demand_ratio\"])).fillna(0.0).round(3)\n\nmarket_area[[\"fname\", \"pbsa_count\", \"uni_count\", \"capacity_demand_ratio\",\n           \"!s_aus_sum\", \"centrality\"]].head(15).sort_values(\"centrality\", ascending=False) ","key":"PzhzbSKHoN"},{"type":"outputs","id":"RfZcmrP2iK40OnSVDk_Nc","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":23,"metadata":{},"data":{"application/vnd.microsoft.datawrangler.viewer.v0+json":{"content":"{\"columns\":[{\"name\":\"index\",\"rawType\":\"int64\",\"type\":\"integer\"},{\"name\":\"fname\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"pbsa_count\",\"rawType\":\"int64\",\"type\":\"integer\"},{\"name\":\"uni_count\",\"rawType\":\"int64\",\"type\":\"integer\"},{\"name\":\"capacity_demand_ratio\",\"rawType\":\"float64\",\"type\":\"float\"},{\"name\":\"!s_aus_sum\",\"rawType\":\"float64\",\"type\":\"float\"},{\"name\":\"centrality\",\"rawType\":\"float64\",\"type\":\"float\"}],\"ref\":\"2e9568d6-9c45-45ef-a4d1-3c97ea5b7990\",\"rows\":[[\"2\",\"University of Europe for Applied Sciences \",\"42\",\"44\",\"0.4530277385794095\",\"3520.246\",\"52.012\"],[\"13\",\"University of the Arts Berlin\",\"50\",\"48\",\"0.3958976140540515\",\"5760.527\",\"51.18\"],[\"5\",\"Hochschule für Wirtschaft und Recht (Berlin, Faculty of Business Administration)\",\"32\",\"37\",\"0.1622625057721707\",\"5449.49\",\"50.653\"],[\"0\",\"Charité - Universitätsmedizin Berlin\",\"37\",\"38\",\"0.47368189357824403\",\"3072.597\",\"47.902\"],[\"8\",\"Humboldt University of Berlin\",\"44\",\"41\",\"0.6267815492232468\",\"3190.825\",\"47.435\"],[\"12\",\"Berlin International University of Applied Sciences\",\"33\",\"35\",\"0.3756962526319999\",\"3196.726\",\"46.894\"],[\"4\",\"Berlin School of Technology (Technical University of Applied Sciences Berlin)\",\"36\",\"34\",\"0.4663774695175361\",\"3023.068\",\"45.718\"],[\"10\",\"Technical University of Berlin\",\"25\",\"18\",\"0.32362478987505466\",\"2567.892\",\"36.318\"],[\"11\",\"ESCP Business School Berlin\",\"17\",\"13\",\"0.3632321856448748\",\"1619.219\",\"30.197\"],[\"9\",\"Free University of Berlin\",\"19\",\"16\",\"0.3234015431509167\",\"2739.128\",\"29.397\"],[\"1\",\"Charité - Universitätsmedizin Berlin\",\"11\",\"12\",\"0.1994991909216223\",\"2563.897\",\"25.269\"],[\"6\",\"SRH Berlin University of Applied Sciences\",\"20\",\"22\",\"1.3554024304733427\",\"1244.649\",\"20.322\"],[\"14\",\"German International University Berlin\",\"6\",\"1\",\"0.5256624825662483\",\"478.0\",\"9.936\"],[\"3\",\"University of Applied Sciences for Technology and Economics Berlin\",\"11\",\"7\",\"0.8566071236067623\",\"4446.418\",\"0.0\"],[\"7\",\"Humboldt University of Berlin\",\"10\",\"8\",\"0.28618654836400853\",\"4352.098\",\"0.0\"]],\"shape\":{\"columns\":6,\"rows\":15}}","content_type":"application/vnd.microsoft.datawrangler.viewer.v0+json"},"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>fname</th>\n      <th>pbsa_count</th>\n      <th>uni_count</th>\n      <th>capacity_demand_ratio</th>\n      <th>!s_aus_sum</th>\n      <th>centrality</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>2</th>\n      <td>University of Europe for Applied Sciences</td>\n      <td>42</td>\n      <td>44</td>\n      <td>0.453028</td>\n      <td>3520.246</td>\n      <td>52.012</td>\n    </tr>\n    <tr>\n      <th>13</th>\n      <td>University of the Arts Berlin</td>\n      <td>50</td>\n      <td>48</td>\n      <td>0.395898</td>\n      <td>5760.527</td>\n      <td>51.180</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>Hochschule für Wirtschaft und Recht (Berlin, F...</td>\n      <td>32</td>\n      <td>37</td>\n      <td>0.162263</td>\n      <td>5449.490</td>\n      <td>50.653</td>\n    </tr>\n    <tr>\n      <th>0</th>\n      <td>Charité - Universitätsmedizin Berlin</td>\n      <td>37</td>\n      <td>38</td>\n      <td>0.473682</td>\n      <td>3072.597</td>\n      <td>47.902</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>Humboldt University of Berlin</td>\n      <td>44</td>\n      <td>41</td>\n      <td>0.626782</td>\n      <td>3190.825</td>\n      <td>47.435</td>\n    </tr>\n    <tr>\n      <th>12</th>\n      <td>Berlin International University of Applied Sci...</td>\n      <td>33</td>\n      <td>35</td>\n      <td>0.375696</td>\n      <td>3196.726</td>\n      <td>46.894</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>Berlin School of Technology (Technical Univers...</td>\n      <td>36</td>\n      <td>34</td>\n      <td>0.466377</td>\n      <td>3023.068</td>\n      <td>45.718</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>Technical University of Berlin</td>\n      <td>25</td>\n      <td>18</td>\n      <td>0.323625</td>\n      <td>2567.892</td>\n      <td>36.318</td>\n    </tr>\n    <tr>\n      <th>11</th>\n      <td>ESCP Business School Berlin</td>\n      <td>17</td>\n      <td>13</td>\n      <td>0.363232</td>\n      <td>1619.219</td>\n      <td>30.197</td>\n    </tr>\n    <tr>\n      <th>9</th>\n      <td>Free University of Berlin</td>\n      <td>19</td>\n      <td>16</td>\n      <td>0.323402</td>\n      <td>2739.128</td>\n      <td>29.397</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Charité - Universitätsmedizin Berlin</td>\n      <td>11</td>\n      <td>12</td>\n      <td>0.199499</td>\n      <td>2563.897</td>\n      <td>25.269</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>SRH Berlin University of Applied Sciences</td>\n      <td>20</td>\n      <td>22</td>\n      <td>1.355402</td>\n      <td>1244.649</td>\n      <td>20.322</td>\n    </tr>\n    <tr>\n      <th>14</th>\n      <td>German International University Berlin</td>\n      <td>6</td>\n      <td>1</td>\n      <td>0.525662</td>\n      <td>478.000</td>\n      <td>9.936</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>University of Applied Sciences for Technology ...</td>\n      <td>11</td>\n      <td>7</td>\n      <td>0.856607</td>\n      <td>4446.418</td>\n      <td>0.000</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>Humboldt University of Berlin</td>\n      <td>10</td>\n      <td>8</td>\n      <td>0.286187</td>\n      <td>4352.098</td>\n      <td>0.000</td>\n    </tr>\n  </tbody>\n</table>\n</div>","content_type":"text/html"},"text/plain":{"content":"                                                fname  pbsa_count  uni_count  \\\n2          University of Europe for Applied Sciences           42         44   \n13                      University of the Arts Berlin          50         48   \n5   Hochschule für Wirtschaft und Recht (Berlin, F...          32         37   \n0                Charité - Universitätsmedizin Berlin          37         38   \n8                       Humboldt University of Berlin          44         41   \n12  Berlin International University of Applied Sci...          33         35   \n4   Berlin School of Technology (Technical Univers...          36         34   \n10                     Technical University of Berlin          25         18   \n11                        ESCP Business School Berlin          17         13   \n9                           Free University of Berlin          19         16   \n1                Charité - Universitätsmedizin Berlin          11         12   \n6           SRH Berlin University of Applied Sciences          20         22   \n14             German International University Berlin           6          1   \n3   University of Applied Sciences for Technology ...          11          7   \n7                       Humboldt University of Berlin          10          8   \n\n    capacity_demand_ratio  !s_aus_sum  centrality  \n2                0.453028    3520.246      52.012  \n13               0.395898    5760.527      51.180  \n5                0.162263    5449.490      50.653  \n0                0.473682    3072.597      47.902  \n8                0.626782    3190.825      47.435  \n12               0.375696    3196.726      46.894  \n4                0.466377    3023.068      45.718  \n10               0.323625    2567.892      36.318  \n11               0.363232    1619.219      30.197  \n9                0.323402    2739.128      29.397  \n1                0.199499    2563.897      25.269  \n6                1.355402    1244.649      20.322  \n14               0.525662     478.000       9.936  \n3                0.856607    4446.418       0.000  \n7                0.286187    4352.098       0.000  ","content_type":"text/plain"}}},"children":[],"key":"zckocAIjFW"}],"key":"bXL13vKnoG"}],"key":"GmqtT4XiYR"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Table XX. Centrality Central Place Metrics","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Ra7v7YyTyK"}],"key":"ixjrb8orEF"}],"key":"KvNAddYvI7"}],"key":"G9LaKzUraX"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The market areas formed by the Humboldt University of Berlin and the University of Applied Sciences for Technology and Economics Berlin have zero centrality, which can be explained by their spatial location in Treptow-Köpenick and Lichtenberg, respectively.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"nLp0lgnky1"}],"key":"oC50Maieik"}],"key":"JRhEsCoU0L"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Service Range Adequacy","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ISAlWFbk9X"}],"key":"fQLmuZ027s"},{"type":"break","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CccUuB9wUn"},{"type":"text","value":"It is based on the key principle of central place theory: service range determines the size of the market territory necessary for the sustainable operation of the facility. As King (1986) notes, the higher the ‘service range’ of a product or service, the larger the area that must provide a sufficient flow of users, and the higher the probability that such a facility will be located in a larger urban centre. Service Range Adequacy allows us to assess how well each territory meets the expected level of service and contributes to the sustainable functioning of the student housing market. It is calculated as the relative share of demand attributable to each market area (","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RQZYhU8b3D"},{"type":"inlineCode","value":"market_area[“cntr_service_range_adequacy”] = market_area[“!s_aus_sum”] / total_demand_complete)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PknGzAcsd6"},{"type":"text","value":")","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FFL6eS3bgz"}],"key":"Df2TlV0WV6"}],"key":"L37HvVQk8K"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"total_demand_complete = uni_dem['!s_aus'].sum()\nmarket_area['cntr_service_range'] = (\n    market_area['!s_aus_sum'] / total_demand_complete).round(3)\n\nmarket_area[[\"fname\",\"!s_aus_sum\", \"centrality\", \"cntr_service_range\"]].head(15).sort_values(\"cntr_service_range\", ascending=False) ","key":"IwN5Vgdzom"},{"type":"outputs","id":"eKCfgKRPkMEDrN_iK13fE","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":24,"metadata":{},"data":{"application/vnd.microsoft.datawrangler.viewer.v0+json":{"content":"{\"columns\":[{\"name\":\"index\",\"rawType\":\"int64\",\"type\":\"integer\"},{\"name\":\"fname\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"!s_aus_sum\",\"rawType\":\"float64\",\"type\":\"float\"},{\"name\":\"centrality\",\"rawType\":\"float64\",\"type\":\"float\"},{\"name\":\"cntr_service_range\",\"rawType\":\"float64\",\"type\":\"float\"}],\"ref\":\"bb3b98d2-250c-4fc3-ba79-a776518c54f6\",\"rows\":[[\"13\",\"University of the Arts Berlin\",\"5760.527\",\"51.18\",\"0.119\"],[\"5\",\"Hochschule für Wirtschaft und Recht (Berlin, Faculty of Business Administration)\",\"5449.49\",\"50.653\",\"0.112\"],[\"3\",\"University of Applied Sciences for Technology and Economics Berlin\",\"4446.418\",\"0.0\",\"0.092\"],[\"7\",\"Humboldt University of Berlin\",\"4352.098\",\"0.0\",\"0.09\"],[\"2\",\"University of Europe for Applied Sciences \",\"3520.246\",\"52.012\",\"0.073\"],[\"8\",\"Humboldt University of Berlin\",\"3190.825\",\"47.435\",\"0.066\"],[\"12\",\"Berlin International University of Applied Sciences\",\"3196.726\",\"46.894\",\"0.066\"],[\"0\",\"Charité - Universitätsmedizin Berlin\",\"3072.597\",\"47.902\",\"0.063\"],[\"4\",\"Berlin School of Technology (Technical University of Applied Sciences Berlin)\",\"3023.068\",\"45.718\",\"0.062\"],[\"9\",\"Free University of Berlin\",\"2739.128\",\"29.397\",\"0.057\"],[\"1\",\"Charité - Universitätsmedizin Berlin\",\"2563.897\",\"25.269\",\"0.053\"],[\"10\",\"Technical University of Berlin\",\"2567.892\",\"36.318\",\"0.053\"],[\"11\",\"ESCP Business School Berlin\",\"1619.219\",\"30.197\",\"0.033\"],[\"6\",\"SRH Berlin University of Applied Sciences\",\"1244.649\",\"20.322\",\"0.026\"],[\"14\",\"German International University Berlin\",\"478.0\",\"9.936\",\"0.01\"]],\"shape\":{\"columns\":4,\"rows\":15}}","content_type":"application/vnd.microsoft.datawrangler.viewer.v0+json"},"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>fname</th>\n      <th>!s_aus_sum</th>\n      <th>centrality</th>\n      <th>cntr_service_range</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>13</th>\n      <td>University of the Arts Berlin</td>\n      <td>5760.527</td>\n      <td>51.180</td>\n      <td>0.119</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>Hochschule für Wirtschaft und Recht (Berlin, F...</td>\n      <td>5449.490</td>\n      <td>50.653</td>\n      <td>0.112</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>University of Applied Sciences for Technology ...</td>\n      <td>4446.418</td>\n      <td>0.000</td>\n      <td>0.092</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>Humboldt University of Berlin</td>\n      <td>4352.098</td>\n      <td>0.000</td>\n      <td>0.090</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>University of Europe for Applied Sciences</td>\n      <td>3520.246</td>\n      <td>52.012</td>\n      <td>0.073</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>Humboldt University of Berlin</td>\n      <td>3190.825</td>\n      <td>47.435</td>\n      <td>0.066</td>\n    </tr>\n    <tr>\n      <th>12</th>\n      <td>Berlin International University of Applied Sci...</td>\n      <td>3196.726</td>\n      <td>46.894</td>\n      <td>0.066</td>\n    </tr>\n    <tr>\n      <th>0</th>\n      <td>Charité - Universitätsmedizin Berlin</td>\n      <td>3072.597</td>\n      <td>47.902</td>\n      <td>0.063</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>Berlin School of Technology (Technical Univers...</td>\n      <td>3023.068</td>\n      <td>45.718</td>\n      <td>0.062</td>\n    </tr>\n    <tr>\n      <th>9</th>\n      <td>Free University of Berlin</td>\n      <td>2739.128</td>\n      <td>29.397</td>\n      <td>0.057</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Charité - Universitätsmedizin Berlin</td>\n      <td>2563.897</td>\n      <td>25.269</td>\n      <td>0.053</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>Technical University of Berlin</td>\n      <td>2567.892</td>\n      <td>36.318</td>\n      <td>0.053</td>\n    </tr>\n    <tr>\n      <th>11</th>\n      <td>ESCP Business School Berlin</td>\n      <td>1619.219</td>\n      <td>30.197</td>\n      <td>0.033</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>SRH Berlin University of Applied Sciences</td>\n      <td>1244.649</td>\n      <td>20.322</td>\n      <td>0.026</td>\n    </tr>\n    <tr>\n      <th>14</th>\n      <td>German International University Berlin</td>\n      <td>478.000</td>\n      <td>9.936</td>\n      <td>0.010</td>\n    </tr>\n  </tbody>\n</table>\n</div>","content_type":"text/html"},"text/plain":{"content":"                                                fname  !s_aus_sum  centrality  \\\n13                      University of the Arts Berlin    5760.527      51.180   \n5   Hochschule für Wirtschaft und Recht (Berlin, F...    5449.490      50.653   \n3   University of Applied Sciences for Technology ...    4446.418       0.000   \n7                       Humboldt University of Berlin    4352.098       0.000   \n2          University of Europe for Applied Sciences     3520.246      52.012   \n8                       Humboldt University of Berlin    3190.825      47.435   \n12  Berlin International University of Applied Sci...    3196.726      46.894   \n0                Charité - Universitätsmedizin Berlin    3072.597      47.902   \n4   Berlin School of Technology (Technical Univers...    3023.068      45.718   \n9                           Free University of Berlin    2739.128      29.397   \n1                Charité - Universitätsmedizin Berlin    2563.897      25.269   \n10                     Technical University of Berlin    2567.892      36.318   \n11                        ESCP Business School Berlin    1619.219      30.197   \n6           SRH Berlin University of Applied Sciences    1244.649      20.322   \n14             German International University Berlin     478.000       9.936   \n\n    cntr_service_range  \n13               0.119  \n5                0.112  \n3                0.092  \n7                0.090  \n2                0.073  \n8                0.066  \n12               0.066  \n0                0.063  \n4                0.062  \n9                0.057  \n1                0.053  \n10               0.053  \n11               0.033  \n6                0.026  \n14               0.010  ","content_type":"text/plain"}}},"children":[],"key":"BeIhpHQY0T"}],"key":"TVNcIytuB8"}],"key":"ieryed1EBL"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Table XX. Service Range Adequacy Central Place Metrics","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"j4gDBUwxnU"}],"key":"aNYYxiRk4j"}],"key":"BWXPwr0c0o"}],"key":"VBdHsawA1J"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Hierarchy Rank","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bfJ0LCxBqX"}],"key":"NbsRvUVOdC"},{"type":"break","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DvYEHE4NzP"},{"type":"text","value":"According to King’s approach, the hierarchy of urban places is defined not only by their size, but primarily by the number and order of the functions they perform (King, 1986, p. 22).","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"QvF2KoQgCH"}],"key":"pSdAnkOjdI"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Following this logic, the ranking of market areas in this study is based on their functional capacity, expressed through two key indicators: centrality and service range adequacy. These values are combined into a composite index (","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"Bk2ytCdINe"},{"type":"inlineCode","value":"market_area[“cntr_hierarchy”] = ((market_area[“centrality”]/100) + (market_ara[“cntr_service_range”])).round(3)","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"ax8zxDpmlT"},{"type":"text","value":"). The hierarchical ranking allows us to see not only the current configuration of supply and demand, but also the structural role of each market area in the urban system, identifying higher-order centres and lower-level areas.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"VTH4OMgZbp"}],"key":"ow824VwvU6"}],"key":"kg9jp0qazR"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"market_area['cntr_hierarchy'] = (\n    (market_area['centrality']/100) + (market_area['cntr_service_range'])).round(3)\n\nmarket_area['cntr_hierarchy_rank'] = pd.qcut(\n    market_area['cntr_hierarchy'],\n    q=5, labels=range(1, 6)   # 1‑5 classes\n)\n\nmarket_area[[\"fname\",\"!s_aus_sum\", \"centrality\", \"cntr_service_range\", \n             'cntr_hierarchy', 'cntr_hierarchy_rank']].head(15).sort_values(\"cntr_hierarchy\", ascending=False) ","key":"cBcskhKM4h"},{"type":"outputs","id":"FEUrKQJe4S_QxP1nPkMvN","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":25,"metadata":{},"data":{"application/vnd.microsoft.datawrangler.viewer.v0+json":{"content":"{\"columns\":[{\"name\":\"index\",\"rawType\":\"int64\",\"type\":\"integer\"},{\"name\":\"fname\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"!s_aus_sum\",\"rawType\":\"float64\",\"type\":\"float\"},{\"name\":\"centrality\",\"rawType\":\"float64\",\"type\":\"float\"},{\"name\":\"cntr_service_range\",\"rawType\":\"float64\",\"type\":\"float\"},{\"name\":\"cntr_hierarchy\",\"rawType\":\"float64\",\"type\":\"float\"},{\"name\":\"cntr_hierarchy_rank\",\"rawType\":\"category\",\"type\":\"unknown\"}],\"ref\":\"d5f3f70f-c9f9-4064-b5ef-b89279230a82\",\"rows\":[[\"13\",\"University of the Arts Berlin\",\"5760.527\",\"51.18\",\"0.119\",\"0.631\",\"5\"],[\"5\",\"Hochschule für Wirtschaft und Recht (Berlin, Faculty of Business Administration)\",\"5449.49\",\"50.653\",\"0.112\",\"0.619\",\"5\"],[\"2\",\"University of Europe for Applied Sciences \",\"3520.246\",\"52.012\",\"0.073\",\"0.593\",\"5\"],[\"0\",\"Charité - Universitätsmedizin Berlin\",\"3072.597\",\"47.902\",\"0.063\",\"0.542\",\"4\"],[\"8\",\"Humboldt University of Berlin\",\"3190.825\",\"47.435\",\"0.066\",\"0.54\",\"4\"],[\"12\",\"Berlin International University of Applied Sciences\",\"3196.726\",\"46.894\",\"0.066\",\"0.535\",\"4\"],[\"4\",\"Berlin School of Technology (Technical University of Applied Sciences Berlin)\",\"3023.068\",\"45.718\",\"0.062\",\"0.519\",\"3\"],[\"10\",\"Technical University of Berlin\",\"2567.892\",\"36.318\",\"0.053\",\"0.416\",\"3\"],[\"9\",\"Free University of Berlin\",\"2739.128\",\"29.397\",\"0.057\",\"0.351\",\"3\"],[\"11\",\"ESCP Business School Berlin\",\"1619.219\",\"30.197\",\"0.033\",\"0.335\",\"2\"],[\"1\",\"Charité - Universitätsmedizin Berlin\",\"2563.897\",\"25.269\",\"0.053\",\"0.306\",\"2\"],[\"6\",\"SRH Berlin University of Applied Sciences\",\"1244.649\",\"20.322\",\"0.026\",\"0.229\",\"2\"],[\"14\",\"German International University Berlin\",\"478.0\",\"9.936\",\"0.01\",\"0.109\",\"1\"],[\"3\",\"University of Applied Sciences for Technology and Economics Berlin\",\"4446.418\",\"0.0\",\"0.092\",\"0.092\",\"1\"],[\"7\",\"Humboldt University of Berlin\",\"4352.098\",\"0.0\",\"0.09\",\"0.09\",\"1\"]],\"shape\":{\"columns\":6,\"rows\":15}}","content_type":"application/vnd.microsoft.datawrangler.viewer.v0+json"},"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>fname</th>\n      <th>!s_aus_sum</th>\n      <th>centrality</th>\n      <th>cntr_service_range</th>\n      <th>cntr_hierarchy</th>\n      <th>cntr_hierarchy_rank</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>13</th>\n      <td>University of the Arts Berlin</td>\n      <td>5760.527</td>\n      <td>51.180</td>\n      <td>0.119</td>\n      <td>0.631</td>\n      <td>5</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>Hochschule für Wirtschaft und Recht (Berlin, F...</td>\n      <td>5449.490</td>\n      <td>50.653</td>\n      <td>0.112</td>\n      <td>0.619</td>\n      <td>5</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>University of Europe for Applied Sciences</td>\n      <td>3520.246</td>\n      <td>52.012</td>\n      <td>0.073</td>\n      <td>0.593</td>\n      <td>5</td>\n    </tr>\n    <tr>\n      <th>0</th>\n      <td>Charité - Universitätsmedizin Berlin</td>\n      <td>3072.597</td>\n      <td>47.902</td>\n      <td>0.063</td>\n      <td>0.542</td>\n      <td>4</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>Humboldt University of Berlin</td>\n      <td>3190.825</td>\n      <td>47.435</td>\n      <td>0.066</td>\n      <td>0.540</td>\n      <td>4</td>\n    </tr>\n    <tr>\n      <th>12</th>\n      <td>Berlin International University of Applied Sci...</td>\n      <td>3196.726</td>\n      <td>46.894</td>\n      <td>0.066</td>\n      <td>0.535</td>\n      <td>4</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>Berlin School of Technology (Technical Univers...</td>\n      <td>3023.068</td>\n      <td>45.718</td>\n      <td>0.062</td>\n      <td>0.519</td>\n      <td>3</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>Technical University of Berlin</td>\n      <td>2567.892</td>\n      <td>36.318</td>\n      <td>0.053</td>\n      <td>0.416</td>\n      <td>3</td>\n    </tr>\n    <tr>\n      <th>9</th>\n      <td>Free University of Berlin</td>\n      <td>2739.128</td>\n      <td>29.397</td>\n      <td>0.057</td>\n      <td>0.351</td>\n      <td>3</td>\n    </tr>\n    <tr>\n      <th>11</th>\n      <td>ESCP Business School Berlin</td>\n      <td>1619.219</td>\n      <td>30.197</td>\n      <td>0.033</td>\n      <td>0.335</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Charité - Universitätsmedizin Berlin</td>\n      <td>2563.897</td>\n      <td>25.269</td>\n      <td>0.053</td>\n      <td>0.306</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>SRH Berlin University of Applied Sciences</td>\n      <td>1244.649</td>\n      <td>20.322</td>\n      <td>0.026</td>\n      <td>0.229</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>14</th>\n      <td>German International University Berlin</td>\n      <td>478.000</td>\n      <td>9.936</td>\n      <td>0.010</td>\n      <td>0.109</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>University of Applied Sciences for Technology ...</td>\n      <td>4446.418</td>\n      <td>0.000</td>\n      <td>0.092</td>\n      <td>0.092</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>Humboldt University of Berlin</td>\n      <td>4352.098</td>\n      <td>0.000</td>\n      <td>0.090</td>\n      <td>0.090</td>\n      <td>1</td>\n    </tr>\n  </tbody>\n</table>\n</div>","content_type":"text/html"},"text/plain":{"content":"                                                fname  !s_aus_sum  centrality  \\\n13                      University of the Arts Berlin    5760.527      51.180   \n5   Hochschule für Wirtschaft und Recht (Berlin, F...    5449.490      50.653   \n2          University of Europe for Applied Sciences     3520.246      52.012   \n0                Charité - Universitätsmedizin Berlin    3072.597      47.902   \n8                       Humboldt University of Berlin    3190.825      47.435   \n12  Berlin International University of Applied Sci...    3196.726      46.894   \n4   Berlin School of Technology (Technical Univers...    3023.068      45.718   \n10                     Technical University of Berlin    2567.892      36.318   \n9                           Free University of Berlin    2739.128      29.397   \n11                        ESCP Business School Berlin    1619.219      30.197   \n1                Charité - Universitätsmedizin Berlin    2563.897      25.269   \n6           SRH Berlin University of Applied Sciences    1244.649      20.322   \n14             German International University Berlin     478.000       9.936   \n3   University of Applied Sciences for Technology ...    4446.418       0.000   \n7                       Humboldt University of Berlin    4352.098       0.000   \n\n    cntr_service_range  cntr_hierarchy cntr_hierarchy_rank  \n13               0.119           0.631                   5  \n5                0.112           0.619                   5  \n2                0.073           0.593                   5  \n0                0.063           0.542                   4  \n8                0.066           0.540                   4  \n12               0.066           0.535                   4  \n4                0.062           0.519                   3  \n10               0.053           0.416                   3  \n9                0.057           0.351                   3  \n11               0.033           0.335                   2  \n1                0.053           0.306                   2  \n6                0.026           0.229                   2  \n14               0.010           0.109                   1  \n3                0.092           0.092                   1  \n7                0.090           0.090                   1  ","content_type":"text/plain"}}},"children":[],"key":"MeFu42yyvU"}],"key":"xb317wKCS1"}],"key":"sHA2ltRJv5"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Table XX. Hierarchy Rank Central Place Metrics","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"aeCD5vVs1z"}],"key":"S0iT3Mme6I"}],"key":"ViaeKzWEvU"}],"key":"S9Gd0d1gNf"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Market Areas Hierarchy Rank demonstrates the distribution of central places by hierarchical classes in accordance with Central Place Theory.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qIVuN19tlt"}],"key":"vswxklUMV4"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Hierarchy Rank - 5. Primary Central Places","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"xVmCm7mU2I"}],"key":"eptB9cw7Oj"}],"key":"FLduL7rJx3"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Primary Central Places (Figure XX) are formed around the University of the Arts Berlin (UAB), the University of Europe for Applied Sciences (UEAS) and the School of Economics and Law (HWR_BA). Although according to King (1986), centrality is not determined by the physical size of the territory, these market areas have some of the largest areas, more than 90 km² each. This is because top-level zones must have a sufficiently wide coverage to serve a large number of functions and significant volumes of demand.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"wndvss19lF"}],"key":"bAWDOL72ib"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Geographically, these market areas are located mainly in the districts of Mitte, Charlottenburg-Wilmersdorf and Friedrichshain-Kreuzberg, as well as partly in Tempelhof-Schöneberg, Steglitz-Zehlendorf and Neukölln, forming a distinct axis in a south-westerly direction. Together, they account for about 32% of total international student demand, which highlights their systemic role in the city’s university infrastructure.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"OjDXXyCxiM"}],"key":"lkePNDiOkC"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"It is worth noting that two of the three primary centres belong to the High–High cluster, meaning they are stable magnets for international students, around which areas of high demand and growing market pressure are forming. However, the greatest pressure is observed in the School of Economics and Law market zone, where demand exceeds available capacity by 6.2 times, making this zone the most vulnerable in the hierarchy of central locations. This imbalance highlights the critical shortage of infrastructure and the need to prioritise the expansion of the housing stock near this educational cluster.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"mNYCTG1foi"}],"key":"K63tgsvQoe"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Together, the primary central places form the core of Berlin’s student urbanisation, where key educational functions, large volumes of demand and the most significant infrastructure imbalances are concentrated. Their high hierarchical position confirms the central role of these areas in the urban structure, but at the same time demonstrates the vulnerability of the system: even higher-order centres face a significant housing shortage and growing market pressure.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"tiqMahldRn"}],"key":"iomsiv3dWN"}],"key":"ddfMIhZPnr"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"fig, axs  = plt.subplots(figsize=(12, 12))\n\npgr.plot(ax=axs, facecolor='none', edgecolor='#cccccc', linewidth=0.5, linestyle=\"--\")\nbz.plot(ax=axs, facecolor='none', edgecolor='#999999', linewidth=0.75)\nout.plot(ax=axs, facecolor='none', edgecolor='#666666', linewidth=1)\n\nmarket_area[market_area['cntr_hierarchy_rank'] == 5].plot(ax=axs,\n          column='cntr_hierarchy_rank',\n          cmap=cmap_pi,\n          alpha=0.55,\n          edgecolor='none',\n          linewidth=0.3,\n          legend=True,\n          legend_kwds={'frameon': False},\n          label = 'hierarchy rank', \n          vmin=0,\n          vmax=5)\n\nmarket_area[market_area['cntr_hierarchy_rank'] == 5].plot(\n    ax=axs,\n    edgecolor='white',  # variable for colormap\n    facecolor=\"none\",        # transparent polygons  # edge colors from your column\n    linewidth=0.3,\n    alpha=1\n)\n\ncentral_places.plot(ax=axs,\n           color='#76A79D', \n           markersize=20,\n           #markersize= 10,\n           alpha=0.75,\n           edgecolor='white',\n           linewidth=1)\nfor _, row in central_places.iterrows():\n    offset = 3  # vertical offset in points\n    axs.annotate(\n        row['abr'],                           # abbreviation\n        xy=(row.geometry.x, row.geometry.y),  # coords from the Point\n        xytext=(0, offset),                   # lift the text a bit\n        textcoords='offset points',\n        color='#1b4332',\n        fontsize=8,\n        ha='center',\n        va='bottom',\n        alpha=1,\n        zorder=6,\n        path_effects=[\n            path_effects.Stroke(linewidth=2, foreground='white'),\n            path_effects.Normal()\n        ]\n    )\n\naxs.set_title('Hierarchy Rank - 5. Primary Central Places', fontsize=16, fontweight='bold')\naxs.set_axis_off()\nplt.tight_layout()\n\nsave_path = os.path.join(hf, \"Hierarchy Rank - 5. Primary Central Places.png\")\nplt.savefig(save_path, dpi=300, bbox_inches=\"tight\")\n\nplt.show()","visibility":"remove","key":"HZERiso11I"},{"type":"outputs","id":"0tYO-Qyd7uJ_uJaSrTpyP","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"e74f9a8ea190d56e00c0690e4f81ca31","path":"/rethinking_student_housing/build/e74f9a8ea190d56e00c0690e4f81ca31.png"},"text/plain":{"content":"<Figure size 1200x1200 with 1 Axes>","content_type":"text/plain"}}},"children":[],"key":"SZ5tko5paR"}],"visibility":"show","key":"uuAX3rQN4u"}],"visibility":"show","key":"GYwPybQMOK"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Figure XX. Primary Central Places","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jSE44mtnTq"}],"key":"mau1TjIpAJ"}],"key":"yEy7ldX4sV"}],"key":"JKkOyo1gI2"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"market_area[market_area['cntr_hierarchy_rank'] == 5][[\"fname\",\"!s_aus_sum\", \"centrality\", \"cntr_service_range\", 'cntr_hierarchy', 'cntr_hierarchy_rank']].head(15).sort_values(\"cntr_hierarchy\", ascending=False) ","visibility":"remove","key":"szFtBFFbnZ"},{"type":"outputs","id":"c1CDF0jTZYQq1NzHorPIV","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":26,"metadata":{},"data":{"application/vnd.microsoft.datawrangler.viewer.v0+json":{"content":"{\"columns\":[{\"name\":\"index\",\"rawType\":\"int64\",\"type\":\"integer\"},{\"name\":\"fname\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"!s_aus_sum\",\"rawType\":\"float64\",\"type\":\"float\"},{\"name\":\"centrality\",\"rawType\":\"float64\",\"type\":\"float\"},{\"name\":\"cntr_service_range\",\"rawType\":\"float64\",\"type\":\"float\"},{\"name\":\"cntr_hierarchy\",\"rawType\":\"float64\",\"type\":\"float\"},{\"name\":\"cntr_hierarchy_rank\",\"rawType\":\"category\",\"type\":\"unknown\"}],\"ref\":\"4c8312c7-fc38-468f-9eb8-4e469025afd7\",\"rows\":[[\"13\",\"University of the Arts Berlin\",\"5760.527\",\"51.18\",\"0.119\",\"0.631\",\"5\"],[\"5\",\"Hochschule für Wirtschaft und Recht (Berlin, Faculty of Business Administration)\",\"5449.49\",\"50.653\",\"0.112\",\"0.619\",\"5\"],[\"2\",\"University of Europe for Applied Sciences \",\"3520.246\",\"52.012\",\"0.073\",\"0.593\",\"5\"]],\"shape\":{\"columns\":6,\"rows\":3}}","content_type":"application/vnd.microsoft.datawrangler.viewer.v0+json"},"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>fname</th>\n      <th>!s_aus_sum</th>\n      <th>centrality</th>\n      <th>cntr_service_range</th>\n      <th>cntr_hierarchy</th>\n      <th>cntr_hierarchy_rank</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>13</th>\n      <td>University of the Arts Berlin</td>\n      <td>5760.527</td>\n      <td>51.180</td>\n      <td>0.119</td>\n      <td>0.631</td>\n      <td>5</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>Hochschule für Wirtschaft und Recht (Berlin, F...</td>\n      <td>5449.490</td>\n      <td>50.653</td>\n      <td>0.112</td>\n      <td>0.619</td>\n      <td>5</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>University of Europe for Applied Sciences</td>\n      <td>3520.246</td>\n      <td>52.012</td>\n      <td>0.073</td>\n      <td>0.593</td>\n      <td>5</td>\n    </tr>\n  </tbody>\n</table>\n</div>","content_type":"text/html"},"text/plain":{"content":"                                                fname  !s_aus_sum  centrality  \\\n13                      University of the Arts Berlin    5760.527      51.180   \n5   Hochschule für Wirtschaft und Recht (Berlin, F...    5449.490      50.653   \n2          University of Europe for Applied Sciences     3520.246      52.012   \n\n    cntr_service_range  cntr_hierarchy cntr_hierarchy_rank  \n13               0.119           0.631                   5  \n5                0.112           0.619                   5  \n2                0.073           0.593                   5  ","content_type":"text/plain"}}},"children":[],"key":"Ik80cbyZD6"}],"visibility":"show","key":"ULsC35iiTL"}],"visibility":"show","key":"wWUiNXDcjP"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Table XX. Primary Central Places","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TtLyuX1LEw"}],"key":"wR6ie4LRG7"}],"key":"dSDkzfEOmm"}],"key":"OWaWGQ7zEM"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Hierarchy Rank - 4. Secondary Central Places","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"nVG1aHGp4S"}],"key":"PLOvoIcqUs"}],"key":"fh4gjhYwN5"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Secondary Central Places Centres (Figure XX) are formed by Humboldt University of (HU), International University of Applied Sciences (BIU) and Charité University Hospital (CU). These market areas are secondary central places, i.e., high-order centres that have significant functional saturation but are lower than primary centres in terms of scale of attraction and infrastructure concentration.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"nFEUglG73f"}],"key":"oqR8PmHldq"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Geographically, secondary central places are located east of primary central places, covering parts of the Lichtenberg and Pankow districts and forming a distinct west-east axis in the spatial structure of the student housing market. This configuration reflects the expansion of the city’s education system in an easterly direction, which is historically less saturated with higher education institutions. Together, these areas account for about 20% of the total demand from international students, confirming their significant but not dominant role in the urban hierarchy.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"TvLPwxmAbr"}],"key":"bafK7mMdvq"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"The average demand–capacity pressure value of 2.1 confirms that demand exceeds current supply by more than double. This creates moderate but stable market pressure, indicating the need for strategic expansion of student infrastructure and further development of public-private initiatives in the field of student accommodation.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"vCCSqJiazq"}],"key":"Ie9PlD35Xj"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Thus, secondary central places function as sub-regional centres in the urban hierarchy, playing a key role in rebalancing demand, ensuring access to higher education and shaping future growth trends in Berlin’s student housing market.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"L9f0sOfYr4"}],"key":"OHLmZ5oxaT"}],"key":"c3XHLkOeu2"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"fig, axs  = plt.subplots(figsize=(12, 12))\n\npgr.plot(ax=axs, facecolor='none', edgecolor='#cccccc', linewidth=0.5, linestyle=\"--\")\nbz.plot(ax=axs, facecolor='none', edgecolor='#999999', linewidth=0.75)\nout.plot(ax=axs, facecolor='none', edgecolor='#666666', linewidth=1)\n\nmarket_area[market_area['cntr_hierarchy_rank'] == 4].plot(ax=axs,\n          column='cntr_hierarchy_rank',\n          cmap=cmap_pi,\n          alpha=0.55,\n          edgecolor='none',\n          linewidth=0.3,\n          legend=True,\n          legend_kwds={'frameon': False},\n          label = 'hierarchy rank', \n          vmin=0,\n          vmax=5)\n\nmarket_area[market_area['cntr_hierarchy_rank'] == 4].plot(\n    ax=axs,\n    edgecolor='white',  # variable for colormap\n    facecolor=\"none\",        # transparent polygons  # edge colors from your column\n    linewidth=0.3,\n    alpha=1\n)\n\ncentral_places.plot(ax=axs,\n           color='#76A79D', \n           markersize=20,\n           #markersize= 10,\n           alpha=0.75,\n           edgecolor='white',\n           linewidth=1)\nfor _, row in central_places.iterrows():\n    offset = 3  # vertical offset in points\n    axs.annotate(\n        row['abr'],                           # abbreviation\n        xy=(row.geometry.x, row.geometry.y),  # coords from the Point\n        xytext=(0, offset),                   # lift the text a bit\n        textcoords='offset points',\n        color='#1b4332',\n        fontsize=8,\n        ha='center',\n        va='bottom',\n        alpha=1,\n        zorder=6,\n        path_effects=[\n            path_effects.Stroke(linewidth=2, foreground='white'),\n            path_effects.Normal()\n        ]\n    )\n\naxs.set_title('Hierarchy Rank - 4. Secondary Central Places', fontsize=16, fontweight='bold')\naxs.set_axis_off()\nplt.tight_layout()\n\nsave_path = os.path.join(hf, \"Hierarchy Rank - 4. Secondary Central Places.png\")\nplt.savefig(save_path, dpi=300, bbox_inches=\"tight\")\n\nplt.show()","visibility":"remove","key":"EQ5eiTog4x"},{"type":"outputs","id":"I4dPJaOSafd4WznhGNY5V","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"aaa7ab1ac3deb48784921be4f569c16a","path":"/rethinking_student_housing/build/aaa7ab1ac3deb48784921be4f569c16a.png"},"text/plain":{"content":"<Figure size 1200x1200 with 1 Axes>","content_type":"text/plain"}}},"children":[],"key":"WpHnetLAKc"}],"visibility":"show","key":"USgeZcqlMX"}],"visibility":"show","key":"dssAToApRs"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Figure XX. Secondary Central Places","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LwpQlu0BbQ"}],"key":"nA7GKcv2Nm"}],"key":"h1cYBulJPT"}],"key":"lZGvbslgb0"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"market_area[market_area['cntr_hierarchy_rank'] == 4][[\"fname\",\"!s_aus_sum\", \"centrality\", \"cntr_service_range\", 'cntr_hierarchy', 'cntr_hierarchy_rank']].head(15).sort_values(\"cntr_hierarchy\", ascending=False) ","visibility":"remove","key":"GGzJhUqKqm"},{"type":"outputs","id":"29WGz8ld_TplRAE23oFod","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":33,"metadata":{},"data":{"application/vnd.microsoft.datawrangler.viewer.v0+json":{"content":"{\"columns\":[{\"name\":\"index\",\"rawType\":\"int64\",\"type\":\"integer\"},{\"name\":\"fname\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"!s_aus_sum\",\"rawType\":\"float64\",\"type\":\"float\"},{\"name\":\"centrality\",\"rawType\":\"float64\",\"type\":\"float\"},{\"name\":\"cntr_service_range\",\"rawType\":\"float64\",\"type\":\"float\"},{\"name\":\"cntr_hierarchy\",\"rawType\":\"float64\",\"type\":\"float\"},{\"name\":\"cntr_hierarchy_rank\",\"rawType\":\"category\",\"type\":\"unknown\"}],\"ref\":\"51ad6625-f049-4f03-b458-18b6a6dbc83a\",\"rows\":[[\"0\",\"Charité - Universitätsmedizin Berlin\",\"3072.597\",\"47.902\",\"0.063\",\"0.542\",\"4\"],[\"8\",\"Humboldt University of Berlin\",\"3190.825\",\"47.435\",\"0.066\",\"0.54\",\"4\"],[\"12\",\"Berlin International University of Applied Sciences\",\"3196.726\",\"46.894\",\"0.066\",\"0.535\",\"4\"]],\"shape\":{\"columns\":6,\"rows\":3}}","content_type":"application/vnd.microsoft.datawrangler.viewer.v0+json"},"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>fname</th>\n      <th>!s_aus_sum</th>\n      <th>centrality</th>\n      <th>cntr_service_range</th>\n      <th>cntr_hierarchy</th>\n      <th>cntr_hierarchy_rank</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Charité - Universitätsmedizin Berlin</td>\n      <td>3072.597</td>\n      <td>47.902</td>\n      <td>0.063</td>\n      <td>0.542</td>\n      <td>4</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>Humboldt University of Berlin</td>\n      <td>3190.825</td>\n      <td>47.435</td>\n      <td>0.066</td>\n      <td>0.540</td>\n      <td>4</td>\n    </tr>\n    <tr>\n      <th>12</th>\n      <td>Berlin International University of Applied Sci...</td>\n      <td>3196.726</td>\n      <td>46.894</td>\n      <td>0.066</td>\n      <td>0.535</td>\n      <td>4</td>\n    </tr>\n  </tbody>\n</table>\n</div>","content_type":"text/html"},"text/plain":{"content":"                                                fname  !s_aus_sum  centrality  \\\n0                Charité - Universitätsmedizin Berlin    3072.597      47.902   \n8                       Humboldt University of Berlin    3190.825      47.435   \n12  Berlin International University of Applied Sci...    3196.726      46.894   \n\n    cntr_service_range  cntr_hierarchy cntr_hierarchy_rank  \n0                0.063           0.542                   4  \n8                0.066           0.540                   4  \n12               0.066           0.535                   4  ","content_type":"text/plain"}}},"children":[],"key":"cEyE0vru4u"}],"visibility":"show","key":"c8XZ3OPVh3"}],"visibility":"show","key":"CJCeIna6nB"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Table XX. Secondary Central Places","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LRDNCy6cEE"}],"key":"prKEsYEO5U"}],"key":"nF8uISCB34"}],"key":"gW3EUewZM2"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Hierarchy Rank - 3. Tertiary Central Places","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mfLgeScyNi"}],"key":"sSjQifrcFc"}],"key":"Y6Qx81YjlJ"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Tertiary Central Places (Figure XX) are formed around the Technical University of Berlin (TUB), Free University (FU) and Berlin School of Technology (BTS). These universities represent significant but less dominant centres of demand, located on the periphery of the primary and secondary central places.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"gTWLPe9LVu"}],"key":"YUt4KMT3Gy"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Geographically, tertiary central places occupy areas to the north and south of secondary central places, covering a significant part of Steglitz-Zehlendorf and Reinickendorf. In this way, they support the established south-western educational axis extending from the primary central places and, at the same time, form a new north-south axis in the spatial structure of the student housing market. This configuration reflects the complex multipolar organisation of demand characteristic of a large polycentric city.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"e6AzA2lX23"}],"key":"S4HDd4FciS"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Together, these market areas account for about 17% of total international student demand, making them significant but not dominant elements in the structure of central places.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"OsvArwofR0"}],"key":"X72yyT3nwY"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"It is noteworthy that all three universities forming tertiary central places belong to the Low–High (LH) cluster and are public. This combination indicates the high educational potential of these areas and their ability to be included in existing clusters, but at the same time demonstrates the lack of full strategic integration into established centres of student urbanisation.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"IZU9UXueDo"}],"key":"Lt7zbFEROe"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"The average demand–capacity pressure value is 2.8, which is higher than that of secondary central places. This indicates that demand is almost three times higher than the available supply. Consequently, tertiary central places are critically important areas of hidden deficit, where a growing gap is forming between the educational potential of universities and the lack of adequate housing infrastructure.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"yvsHLVjkz5"}],"key":"TiFVHdfj0f"}],"key":"SFm1vBWKJb"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"fig, axs  = plt.subplots(figsize=(12, 12))\n\npgr.plot(ax=axs, facecolor='none', edgecolor='#cccccc', linewidth=0.5, linestyle=\"--\")\nbz.plot(ax=axs, facecolor='none', edgecolor='#999999', linewidth=0.75)\nout.plot(ax=axs, facecolor='none', edgecolor='#666666', linewidth=1)\n\nmarket_area[market_area['cntr_hierarchy_rank'] == 3].plot(ax=axs,\n          column='cntr_hierarchy_rank',\n          cmap=cmap_pi,\n          alpha=0.55,\n          edgecolor='none',\n          linewidth=0.3,\n          legend=True,\n          legend_kwds={'frameon': False},\n          label = 'hierarchy rank', \n          vmin=0,\n          vmax=5)\n\nmarket_area[market_area['cntr_hierarchy_rank'] == 3].plot(\n    ax=axs,\n    edgecolor='white',  # variable for colormap\n    facecolor=\"none\",        # transparent polygons  # edge colors from your column\n    linewidth=0.3,\n    alpha=1\n)\n\ncentral_places.plot(ax=axs,\n           color='#76A79D', \n           markersize=20,\n           #markersize= 10,\n           alpha=0.75,\n           edgecolor='white',\n           linewidth=1)\nfor _, row in central_places.iterrows():\n    offset = 3  # vertical offset in points\n    axs.annotate(\n        row['abr'],                           # abbreviation\n        xy=(row.geometry.x, row.geometry.y),  # coords from the Point\n        xytext=(0, offset),                   # lift the text a bit\n        textcoords='offset points',\n        color='#1b4332',\n        fontsize=8,\n        ha='center',\n        va='bottom',\n        alpha=1,\n        zorder=6,\n        path_effects=[\n            path_effects.Stroke(linewidth=2, foreground='white'),\n            path_effects.Normal()\n        ]\n    )\n\naxs.set_title('Hierarchy Rank - 3. Tertiary Central Places', fontsize=16, fontweight='bold')\naxs.set_axis_off()\nplt.tight_layout()\n\nsave_path = os.path.join(hf, \"Hierarchy Rank - 3. Tertiary Central Places.png\")\nplt.savefig(save_path, dpi=300, bbox_inches=\"tight\")\n\nplt.show()","visibility":"remove","key":"vMV14C1x1Z"},{"type":"outputs","id":"X6jskhD3iI1biFYJLWHhd","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"e6962f9201368a3a9278e78ca3fc74ed","path":"/rethinking_student_housing/build/e6962f9201368a3a9278e78ca3fc74ed.png"},"text/plain":{"content":"<Figure size 1200x1200 with 1 Axes>","content_type":"text/plain"}}},"children":[],"key":"lf3lx2rO4Y"}],"visibility":"show","key":"JxJYSK5T7c"}],"visibility":"show","key":"XQo4UyOVRX"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Figure XX. Tertiary Central Places","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DOYiR7ges2"}],"key":"C4IbhgsENm"}],"key":"I8hDGE0mJc"}],"key":"hqBLrohWUD"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"market_area[market_area['cntr_hierarchy_rank'] == 3][[\"fname\",\"!s_aus_sum\", \"centrality\", \"cntr_service_range\", 'cntr_hierarchy', 'cntr_hierarchy_rank']].head(15).sort_values(\"cntr_hierarchy\", ascending=False) ","visibility":"remove","key":"mjYiBFOMrU"},{"type":"outputs","id":"X7WZGhxI22wsQ99M5zhH0","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":34,"metadata":{},"data":{"application/vnd.microsoft.datawrangler.viewer.v0+json":{"content":"{\"columns\":[{\"name\":\"index\",\"rawType\":\"int64\",\"type\":\"integer\"},{\"name\":\"fname\",\"rawType\":\"object\",\"type\":\"string\"},{\"name\":\"!s_aus_sum\",\"rawType\":\"float64\",\"type\":\"float\"},{\"name\":\"centrality\",\"rawType\":\"float64\",\"type\":\"float\"},{\"name\":\"cntr_service_range\",\"rawType\":\"float64\",\"type\":\"float\"},{\"name\":\"cntr_hierarchy\",\"rawType\":\"float64\",\"type\":\"float\"},{\"name\":\"cntr_hierarchy_rank\",\"rawType\":\"category\",\"type\":\"unknown\"}],\"ref\":\"0d2667f6-aae4-4194-8e62-a93cca277eea\",\"rows\":[[\"4\",\"Berlin School of Technology (Technical University of Applied Sciences Berlin)\",\"3023.068\",\"45.718\",\"0.062\",\"0.519\",\"3\"],[\"10\",\"Technical University of Berlin\",\"2567.892\",\"36.318\",\"0.053\",\"0.416\",\"3\"],[\"9\",\"Free University of Berlin\",\"2739.128\",\"29.397\",\"0.057\",\"0.351\",\"3\"]],\"shape\":{\"columns\":6,\"rows\":3}}","content_type":"application/vnd.microsoft.datawrangler.viewer.v0+json"},"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>fname</th>\n      <th>!s_aus_sum</th>\n      <th>centrality</th>\n      <th>cntr_service_range</th>\n      <th>cntr_hierarchy</th>\n      <th>cntr_hierarchy_rank</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>4</th>\n      <td>Berlin School of Technology (Technical Univers...</td>\n      <td>3023.068</td>\n      <td>45.718</td>\n      <td>0.062</td>\n      <td>0.519</td>\n      <td>3</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>Technical University of Berlin</td>\n      <td>2567.892</td>\n      <td>36.318</td>\n      <td>0.053</td>\n      <td>0.416</td>\n      <td>3</td>\n    </tr>\n    <tr>\n      <th>9</th>\n      <td>Free University of Berlin</td>\n      <td>2739.128</td>\n      <td>29.397</td>\n      <td>0.057</td>\n      <td>0.351</td>\n      <td>3</td>\n    </tr>\n  </tbody>\n</table>\n</div>","content_type":"text/html"},"text/plain":{"content":"                                                fname  !s_aus_sum  centrality  \\\n4   Berlin School of Technology (Technical Univers...    3023.068      45.718   \n10                     Technical University of Berlin    2567.892      36.318   \n9                           Free University of Berlin    2739.128      29.397   \n\n    cntr_service_range  cntr_hierarchy cntr_hierarchy_rank  \n4                0.062           0.519                   3  \n10               0.053           0.416                   3  \n9                0.057           0.351                   3  ","content_type":"text/plain"}}},"children":[],"key":"T4vs4M3DKi"}],"visibility":"show","key":"J4Gs50Fixu"}],"visibility":"show","key":"l3z3rw6OnG"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Table XX. Tertiary Central Places","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ld7jEgDPKB"}],"key":"f72ORniK59"}],"key":"IkKMvF33iY"}],"key":"gZZftjmLWi"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Hierarchy Rank - 2. Local Central Places","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"t0c6IVXCGG"}],"key":"jXlP4E8FCx"}],"key":"QlYcisBZGQ"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Local Central Places (Figure XX) are formed around SRH Berlin University of Applied Sciences (SRHU), Charité University Hospital (CU) and ESCP Business School Berlin (ESCP). These universities act as local centres, primarily serving the surrounding areas and acting as a link between larger secondary and tertiary central places.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"MblfOALSmz"}],"key":"tCzm1W09wH"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Geographically, these market areas are mainly located in the districts of Friedrichshain-Kreuzberg and Neukölln, as well as partly in Mitte, Charlottenburg-Wilmersdorf, Tempelhof-Schöneberg, Treptow-Köpenick and Lichtenberg. Spatially, they occupy positions south of secondary central places and simultaneously support two key axes of the urban structure: the west-east axis formed by secondary central places and the north-south axis formed by tertiary central places. In this way, local central places reinforce the polycentric organisation of the student housing market, ensuring connectivity between areas of different hierarchical levels and serving 11% of student demand.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Yj9gV0SDLz"}],"key":"Mv659NxZQM"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"What is particularly interesting is that the three universities that form this hierarchical level belong to different types of spatial clusters: ESCP Business School Berlin is characterised by a High-High (HH) pattern, Charité University Hospital by a High-Low (HL) pattern, and SRH Berlin University of Applied Sciences by a Low-High (LH) pattern. This highlights the heterogeneity of these areas and their varying degrees of integration into existing educational clusters.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"LDGcM8TMBv"}],"key":"ptlTncB6Ry"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"The intensity of market pressure within local central places also varies. Market areas formed by private universities ESCP and SRHU show relatively moderate indicators: 2.7 and 0.7, respectively. At the same time, the area formed by the state-owned Charité University Hospital experiences a pronounced imbalance between supply and demand: demand exceeds available capacity by five times. This indicates a structural shortage of student housing in one of the city’s most important medical and scientific centres.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"AhMzOV6CR9"}],"key":"J8c90H6m58"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Thus, local central places reflect an important intermediate level of the city’s educational and housing structure. They combine areas with stable patterns of demand and supply, adjacent to local shortages, and form a significant component of Berlin’s polycentric student space.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"fmhun4wVel"}],"key":"w86Jk5py0E"}],"key":"sNhjwcq5Ai"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"fig, axs  = plt.subplots(figsize=(12, 12))\n\npgr.plot(ax=axs, facecolor='none', edgecolor='#cccccc', linewidth=0.5, linestyle=\"--\")\nbz.plot(ax=axs, facecolor='none', edgecolor='#999999', linewidth=0.75)\nout.plot(ax=axs, facecolor='none', edgecolor='#666666', linewidth=1)\n\nmarket_area[market_area['cntr_hierarchy_rank'] == 2].plot(ax=axs,\n          column='cntr_hierarchy_rank',\n          cmap=cmap_pi,\n          alpha=0.55,\n          edgecolor='none',\n          linewidth=0.3,\n          legend=True,\n          legend_kwds={'frameon': False},\n          label = 'hierarchy rank', \n          vmin=0,\n          vmax=5)\n\nmarket_area[market_area['cntr_hierarchy_rank'] == 2].plot(\n    ax=axs,\n    edgecolor='white',  # variable for colormap\n    facecolor=\"none\",        # transparent polygons  # edge colors from your column\n    linewidth=0.3,\n    alpha=1\n)\n\ncentral_places.plot(ax=axs,\n           color='#76A79D', \n           markersize=20,\n           #markersize= 10,\n           alpha=0.75,\n           edgecolor='white',\n           linewidth=1)\nfor _, row in central_places.iterrows():\n    offset = 3  # vertical offset in points\n    axs.annotate(\n        row['abr'],                           # abbreviation\n        xy=(row.geometry.x, row.geometry.y),  # coords from the Point\n        xytext=(0, offset),                   # lift the text a bit\n        textcoords='offset points',\n        color='#1b4332',\n        fontsize=8,\n        ha='center',\n        va='bottom',\n        alpha=1,\n        zorder=6,\n        path_effects=[\n            path_effects.Stroke(linewidth=2, foreground='white'),\n            path_effects.Normal()\n        ]\n    )\n\naxs.set_title('Hierarchy Rank - 2. Local Central Places', fontsize=16, fontweight='bold')\naxs.set_axis_off()\nplt.tight_layout()\n\nsave_path = os.path.join(hf, \"Hierarchy Rank - 2. Local Central Places.png\")\nplt.savefig(save_path, dpi=300, bbox_inches=\"tight\")\n\nplt.show()","visibility":"remove","key":"Tyc6SSAq3c"},{"type":"outputs","id":"xTm9xo0KI8FNn51SpeI2R","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"171e7ea589c29064e58ed91b3de17fa1","path":"/rethinking_student_housing/build/171e7ea589c29064e58ed91b3de17fa1.png"},"text/plain":{"content":"<Figure size 1200x1200 with 1 Axes>","content_type":"text/plain"}}},"children":[],"key":"igyq05Huhu"}],"visibility":"show","key":"e5Lx5JwlLp"}],"visibility":"show","key":"QzgponzJMl"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Figure XX. Local Central Places","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"fKo1vbBX2x"}],"key":"fDNkD2277E"}],"key":"XNVYvUOHRj"}],"key":"ekUVSrrxog"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"market_area[market_area['cntr_hierarchy_rank'] == 3][[\"fname\",\"!s_aus_sum\", \"centrality\", \"cntr_service_range\", 'cntr_hierarchy', 'cntr_hierarchy_rank']].head(15).sort_values(\"cntr_hierarchy\", ascending=False) ","visibility":"remove","key":"COpTIQ7srL"},{"type":"outputs","id":"BogVf6JpRwjUGUq8Nzs5J","children":[],"visibility":"show","key":"cvZIuGiU6r"}],"visibility":"show","key":"DFzEsdkXUk"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Table XX. Local Central Places","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XYHcKA7no7"}],"key":"HDqsvv8cr7"}],"key":"UdiZ6RrSw5"}],"key":"M20r8ZXUoL"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Hierarchy Rank - 1. Basic Service Areas","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YhPED4fAsT"}],"key":"HPnS9lbP2q"}],"key":"mxPdSL87lX"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Basic Service Areas (Figure XX) are formed around the German International University Berlin (GIU), University of Applied Sciences for Technology, Economics Berlin (HTW) and Humboldt University of Berlin (HU). These universities are basic service centres whose role in the structure of central locations is primarily to provide fundamental educational functions and support peripheral parts of the urban system.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"NPuLc3t564"}],"key":"iVagd6rsou"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Geographically, these market areas are located mainly in the districts of Reinickendorf, Treptow-Köpenick and Lichtenberg. They are situated to the south-east and north-west of the secondary central places. This location emphasises their functional role as areas serving peripheral or poorly integrated parts of the city’s educational space, acting as ‘edge’ centres in Berlin’s polycentric structure.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"MYRrKXydhf"}],"key":"YX3rlA3IFf"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Collectively, Basic Service Areas account for about 19% of international student demand — more than  tertiary central places. This indicates that even the most basic centres in the hierarchy play a significant role in the distribution of student mobility and the formation of market pressure, serving significant shares of both educational and housing demand in the periphery.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"hEA5GWm1uA"}],"key":"xZLxzCL6UX"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"It is worth noting that two of the three universities forming this hierarchical level belong to the Low–High (LH) cluster, demonstrating low supply with higher regional demand. The third university is private and belongs to the High–Low (HL) cluster, reflecting the opposite dynamic: a high value at the facility level in an environment with relatively low values. This distribution of clusters shows that the basic market areas are characterised by strong heterogeneity in demand and supply, as well as varying levels of integration into existing educational clusters.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"WgxH3gGx9b"}],"key":"GyWU9zOmja"}],"key":"PWh3VHpD73"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"fig, axs  = plt.subplots(figsize=(12, 12))\n\npgr.plot(ax=axs, facecolor='none', edgecolor='#cccccc', linewidth=0.5, linestyle=\"--\")\nbz.plot(ax=axs, facecolor='none', edgecolor='#999999', linewidth=0.75)\nout.plot(ax=axs, facecolor='none', edgecolor='#666666', linewidth=1)\n\nmarket_area[market_area['cntr_hierarchy_rank'] == 1].plot(ax=axs,\n          column='cntr_hierarchy_rank',\n          cmap=cmap_pi,\n          alpha=0.55,\n          edgecolor='none',\n          linewidth=0.3,\n          legend=True,\n          legend_kwds={'frameon': False},\n          label = 'hierarchy rank', \n          vmin=0,\n          vmax=5)\n\nmarket_area[market_area['cntr_hierarchy_rank'] == 1].plot(\n    ax=axs,\n    edgecolor='white',  # variable for colormap\n    facecolor=\"none\",        # transparent polygons  # edge colors from your column\n    linewidth=0.3,\n    alpha=1\n)\n\ncentral_places.plot(ax=axs,\n           color='#76A79D', \n           markersize=20,\n           #markersize= 10,\n           alpha=0.75,\n           edgecolor='white',\n           linewidth=1)\nfor _, row in central_places.iterrows():\n    offset = 3  # vertical offset in points\n    axs.annotate(\n        row['abr'],                           # abbreviation\n        xy=(row.geometry.x, row.geometry.y),  # coords from the Point\n        xytext=(0, offset),                   # lift the text a bit\n        textcoords='offset points',\n        color='#1b4332',\n        fontsize=8,\n        ha='center',\n        va='bottom',\n        alpha=1,\n        zorder=6,\n        path_effects=[\n            path_effects.Stroke(linewidth=2, foreground='white'),\n            path_effects.Normal()\n        ]\n    )\n\naxs.set_title('Hierarchy Rank - 1. Basic Service Areas', fontsize=16, fontweight='bold')\naxs.set_axis_off()\nplt.tight_layout()\n\nsave_path = os.path.join(hf, \"Hierarchy Rank - 1. Basic Service Areas.png\")\nplt.savefig(save_path, dpi=300, bbox_inches=\"tight\")\n\nplt.show()","visibility":"remove","key":"pHNxt1rp78"},{"type":"outputs","id":"pAjDcwdlrnGwf4IhsbLL-","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"2383b0c8897fbc40e6867876928a5698","path":"/rethinking_student_housing/build/2383b0c8897fbc40e6867876928a5698.png"},"text/plain":{"content":"<Figure size 1200x1200 with 1 Axes>","content_type":"text/plain"}}},"children":[],"key":"nHEloRff91"}],"visibility":"show","key":"eIqZl2KKtD"}],"visibility":"show","key":"XCqy9dRZ4n"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Figure XX. Basic Service Areas","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ELtbexVLr9"}],"key":"c4BkRGlTkr"}],"key":"HiTPT0jUBo"}],"key":"efZkczXnZY"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"market_area[market_area['cntr_hierarchy_rank'] == 3][[\"fname\",\"!s_aus_sum\", \"centrality\", \"cntr_service_range\", 'cntr_hierarchy', 'cntr_hierarchy_rank']].head(15).sort_values(\"cntr_hierarchy\", ascending=False) ","visibility":"remove","key":"Q5wYehHqEd"},{"type":"outputs","id":"fN-OdJEJAx0ExYYNmYOTH","children":[],"visibility":"show","key":"vxRfuz5p2s"}],"visibility":"show","key":"hgegdd9LPj"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Table XX. Basic Service Areas","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Wr6SY3Yp0M"}],"key":"vzFgmF7LFJ"}],"key":"xE23C9ScmK"}],"key":"jupwLtabU8"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The constructed hierarchy of market areas revealed a pronounced polycentricity of the city’s educational space: central locations at the highest levels concentrate the greatest student demand and form the main clusters of attraction, while lower-level zones perform supporting functions. At the same time, demand significantly exceeds supply at all levels.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pxnjRy6sGq"}],"key":"fy2EGQ7FbC"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Thus, the analysis shows that the student housing crisis in Berlin has a clearly defined spatial structure. The uneven distribution of both universities and accommodation infrastructure exacerbates market pressure, creating persistent areas of overload and local shortages, which require further strategic intervention and planning.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Nm6zWuoBtX"}],"key":"TvgxSasnWQ"}],"key":"WeiEfQ39zb"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"market_area.to_crs(epsg=25833)\n\nef = r\"../outputs/3.2_central_place_analysis/market_area_central_place_analysis.gpkg\"\nmarket_area.to_file(ef, driver=\"GPKG\")","key":"qMKwn190W4"},{"type":"outputs","id":"QzPrEyNfx833kAghfn6hl","children":[],"key":"QKhzQCkY1L"}],"key":"VykfIlWum3"}],"key":"ds3dTdBUPe"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"3.1 Overview","url":"/notebooks/overview-1","group":"3. Student Housing Market Imbalance"},"next":{"title":"3.3 Market Pressure Analysis","url":"/notebooks/market-pressure-analysis","group":"3. Student Housing Market Imbalance"}}},"domain":"http://localhost:3000"}